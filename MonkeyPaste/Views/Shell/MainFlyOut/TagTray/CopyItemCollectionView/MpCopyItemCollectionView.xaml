<ContentPage x:Class="MonkeyPaste.MpCopyItemCollectionView"
             xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MonkeyPaste"
             xmlns:skia="clr-namespace:SkiaSharp;assembly=SkiaSharp"
             WidthRequest="1000"
             HeightRequest="1000"
             BackgroundColor="Purple"
             Title="Monkey Paste"
             x:Name="CopyItemCollectionView"
             x:DataType="local:MpCopyItemCollectionViewModel">
    <ContentPage.BindingContext>
        <local:MpCopyItemCollectionViewModel />
    </ContentPage.BindingContext>
    <ContentPage.Resources>
        <ResourceDictionary>
            <Style TargetType="Grid">
                <Setter Property="VisualStateManager.VisualStateGroups">
                    <VisualStateGroupList>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" />
                            <VisualState x:Name="Selected">
                                <VisualState.Setters>
                                    <Setter Property="Opacity" Value="0.5" />
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateGroupList>
                </Setter>
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>
    <ContentPage.Content>
        <CollectionView
            x:Name="CopyItemViewModels"
            EmptyView="{Binding}"
            ItemsSource="{Binding CopyItemViewModels}"
            RemainingItemsThreshold="5"
            RemainingItemsThresholdReachedCommand="{Binding LoadMore}"
            SelectedItem="{Binding SelectedCopyItemViewModel, Mode=TwoWay}"
            SelectionMode="Single">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Vertical"
                                   SnapPointsAlignment="Start"
                                   SnapPointsType="Mandatory" />
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate x:DataType="local:MpCopyItemViewModel">
                    <local:MpCopyItemView BindingContext="{Binding .}"/>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <CollectionView.EmptyViewTemplate>
                <DataTemplate x:DataType="local:MpCopyItemCollectionViewModel">
                    <Grid>
                        <ActivityIndicator IsVisible="{Binding IsBusy}" />
                        <Label
                            HorizontalOptions="Center"
                            HorizontalTextAlignment="Center"
                            IsVisible="{Binding IsNotBusy}"
                            Text="No photos to import could be found"
                            VerticalOptions="Center" />
                    </Grid>
                </DataTemplate>
            </CollectionView.EmptyViewTemplate>
        </CollectionView>
    </ContentPage.Content>
</ContentPage>