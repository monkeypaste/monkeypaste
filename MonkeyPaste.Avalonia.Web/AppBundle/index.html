<!DOCTYPE html>
<html>

<head>
    <title>MonkeyPaste.Avalonia.Web</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/" />
    <link rel="modulepreload" href="./main.js" />
    <link rel="modulepreload" href="./dotnet.js" />
    <link rel="modulepreload" href="./avalonia.js" />
    <link rel="stylesheet" href="./app.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <script type="text/javascript">
        //function createIframe(hostGuid,srcUrl) {
        //    var iframe_elm = document.createElement('iframe');

        //    iframe_elm.addEventListener('load', onIframeLoaded);

        //    iframe_elm.id = hostGuid;
        //    //iframe_elm.setAttribute('src', 'Editor/index.html?auto_test');
        //    iframe_elm.setAttribute('src', srcUrl);
        //    iframe_elm.setAttribute('crossorigin', true);
        //    iframe_elm.setAttribute('credentialless', true);

        //    return iframe_elm;
        //}
        //function onIframeLoaded(e) {
        //    onIframeNavigated(e.srcElement.id, e.srcElement.getAttribute('src'));
        //}

        //function navigateIframe(iframe_elm, url) {
        //    //let iframe_elm = getEditorIframeElementByHostGuid(hostGuid);
        //    if (!iframe_elm) {
        //        console.log('no iframe found for guid: ' + hostGuid + ' cannot set url ' + url);
        //        return;
        //    }
        //    iframe_elm.setAttribute('src', url);
        //}


        //function getEditorIframeElementByHostGuid(hostGuid) {
        //    return document.getElementById(hostGuid);
        //}

        //function sendMessageToIframe(editor_elm, msg) {
        //    if (!msg) {
        //        return;
        //    }
        //    //let editor_elm = getEditorIframeElementByHostGuid(hostGuid);
        //    if (!editor_elm) {
        //        return;
        //    }
        //    editor_elm.contentWindow.postMessage(msg);
        //    console.log('msg to editor: ' + msg)
        //}

        //window.addEventListener('message', onReceivedIframeMessage, false);

        //function onReceivedIframeMessage(e) {
        //    console.log('recevd iframe message: ' + e);
        //    sendMessageToHost(e.guid, e.type, e.data);
        //}

        //async function onIframeNavigated(hostGuid, url) {
        //    const { getAssemblyExports } = dotnetRuntime;//await getDotnetRuntime(0);
        //    var exports = await getAssemblyExports("MonkeyPaste.Avalonia.Web.dll");
        //    exports.MonkeyPaste.Avalonia.Web.EmbedInterop.iframeNavigated(hostGuid, url);
        //}

        //async function sendMessageToHost(hostGuid, fn, msg) {
        //    const { getAssemblyExports } = dotnetRuntime;//await getDotnetRuntime(0);
        //    var exports = await getAssemblyExports("MonkeyPaste.Avalonia.Web.dll");

        //    //document.getElementById("result").innerText =
        //    //    exports.BlazorSample.Pages.CallDotNet1.GetMessageFromDotnet();
        //    exports.MonkeyPaste.Avalonia.Web.EmbedInterop.receiveMessageFromIframe(hostGuid, fn, msg);
        //}


        

    </script>
</head>

<body style="margin: 0px; overflow: hidden">
    <div id="out">
        <div id="avalonia-splash">
            <div class="center">
                <h2 class="purple">
                    Powered by
                    <a class="highlight" href="https://www.avaloniaui.net/" target="_blank">Avalonia UI</a>
                </h2>
            </div>
            <img class="icon" src="Logo.svg" alt="Avalonia Logo" />
        </div>
    </div>
    <script type='module' src="./main.js"></script>
</body>

</html>