<p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">public</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">static</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">bool</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> IsRichHtmlMixedMedia(</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">this</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> qhtml) {</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> imgTagStartStr = </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(128,0,0);">@"&lt;img src='"</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">int</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> img_tag_start_idx = qhtml.IndexOf(imgTagStartStr);</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">if</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> (img_tag_start_idx >= 0) {</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">//html has an img </span><br></p><p class="ql-align-left"><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">// check before img tag</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> pre_img_only_qhtml = </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(163,21,21);">"<p>"</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> pre_img_qhtml = qhtml.Substring(0, img_tag_start_idx);</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">bool</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> is_pre_img_only = pre_img_qhtml == pre_img_only_qhtml;</span><br></p><p class="ql-align-left"><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">if</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">(is_pre_img_only) {</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                    </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">// check after img tag</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                    </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">int</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> post_img_tag_start_idx = img_tag_start_idx + imgTagStartStr.Length;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                    </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> post_img_tag_start_str = qhtml.Substring(post_img_tag_start_idx);</span><br></p><p class="ql-align-left"><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                    </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">if</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> (post_img_tag_start_str.Contains(</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(163,21,21);">">"</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">)) {</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">//ensure img tag is closed or false positive occurs</span><br></p><p class="ql-align-left"><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">// get actual end of img tag idx</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">int</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> img_tag_end_idx = post_img_tag_start_str.IndexOf(</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(163,21,21);">">"</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">) + post_img_tag_start_idx;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> post_img_only_qhtml = </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(163,21,21);">"</p>"</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">string</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> post_img_qhtml = qhtml.Substring(img_tag_end_idx);</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">bool</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> is_post_img_only = post_img_qhtml == post_img_only_qhtml;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">if</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">(is_post_img_only) {</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">// qhtml is an img item and not mixed content</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">return</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">false</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                        }</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                    }</span><br></p><p class="ql-align-left"><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                }</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,128,0);">// qhtml either has text before or after an image so its mixed content and not 100% format compatible</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">                </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">return</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">true</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">            }</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">            </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">return</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);"> </span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,255);">false</span><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">;</span><br></p><p class="ql-align-left"><span class="ql-font-cascadia-mono" style="font-size: 12px; color: rgb(0,0,0);">        }</span><br></p>