<UserControl x:Class="MpWpfApp.MpSecurityTabPanel"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MpWpfApp"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800"
             d:DataContext="{d:DesignInstance Type=local:MpSettingsWindowViewModel,
                                              IsDesignTimeCreatable=False}">
    <Grid>
        <StackPanel Orientation="Vertical">
            <StackPanel Orientation="Horizontal">
                <StackPanel Orientation="Vertical"
                            DataContext="{Binding AppCollectionViewModel}">
                    <DataGrid Grid.Row="1"
                              x:Name="ExcludedAppDatagrid"
                              ItemsSource="{Binding Items}"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Top"
                              Width="430"
                              MaxHeight="350"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              SelectedItem="{Binding SelectedItem,
                                                     Mode=TwoWay}"
                              SelectionMode="Single"
                              GridLinesVisibility="None"
                              CanUserAddRows="False"
                              Margin="15,15,15,5"
                              AutoGenerateColumns="False">
                        <DataGrid.RowStyle>
                            <Style TargetType="{x:Type DataGridRow}">
                                <Setter Property="IsSelected"
                                        Value="{Binding IsSelected,
                                                        Mode=TwoWay,
                                                        UpdateSourceTrigger=PropertyChanged}" />
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Width="30">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Width="15"
                                               Height="15"
                                               Source="{Binding IconId,
                                                                Converter={StaticResource IconIdToImageSourceConverter}}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Name"
                                                    CanUserSort="True"
                                                    SortMemberPath="AppName"
                                                    CanUserResize="True"
                                                    Width="80">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="{Binding AppName}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Process Path"
                                                    CanUserSort="True"
                                                    SortMemberPath="AppPath"
                                                    CanUserResize="True"
                                                    Width="240">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Foreground="Black"
                                                   VerticalAlignment="Center"
                                                   HorizontalAlignment="Left"
                                                   Text="{Binding AppPath}"
                                                   Background="Transparent" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Width="70"
                                                    CanUserSort="True"
                                                    SortMemberPath="IsAppRejected"
                                                    Header="Exclude">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Background="White"
                                                  BorderThickness="1"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  VerticalContentAlignment="Stretch"
                                                  IsChecked="{Binding IsAppRejected,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Width="200"
                            Command="{Binding AddAppCommand}">
                        <DockPanel>
                            <Image Source="{Binding .,
                                                    Source={StaticResource AddIcon},
                                                    Converter={StaticResource StringResourceToImageSourceConverter}}"
                                   DockPanel.Dock="Left"
                                   Width="20"
                                   Height="20" />
                            <Label DockPanel.Dock="Right"
                                   Content="Add Application" />
                        </DockPanel>
                    </Button>
                </StackPanel>
                <StackPanel Orientation="Vertical"
                            DataContext="{Binding UrlCollectionViewModel}">
                    <DataGrid Grid.Row="1"
                              x:Name="ExcludedUrlDatagrid"
                              ItemsSource="{Binding Items}"
                              HorizontalAlignment="Center"
                              VerticalAlignment="Top"
                              Width="430"
                              MaxHeight="350"
                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                              SelectedItem="{Binding SelectedItem,
                                                     Mode=TwoWay}"
                              SelectionMode="Single"
                              GridLinesVisibility="None"
                              CanUserAddRows="False"
                              Margin="15,15,15,5"
                              AutoGenerateColumns="False">
                        <DataGrid.RowStyle>
                            <Style TargetType="{x:Type DataGridRow}">
                                <Setter Property="IsSelected"
                                        Value="{Binding IsSelected,
                                                        Mode=TwoWay,
                                                        UpdateSourceTrigger=PropertyChanged}" />
                            </Style>
                        </DataGrid.RowStyle>
                        <DataGrid.Columns>
                            <DataGridTemplateColumn Width="30">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Width="15"
                                               Height="15"
                                               Source="{Binding IconId,
                                                                Converter={StaticResource IconIdToImageSourceConverter}}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Url"
                                                    CanUserSort="True"
                                                    CanUserResize="True"
                                                    SortMemberPath="UrlPath"
                                                    Width="125">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="{Binding UrlPath}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Header="Domain"
                                                    CanUserResize="True"
                                                    CanUserSort="True"
                                                    SortMemberPath="UrlDomainPath"
                                                    Width="75">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock VerticalAlignment="Center"
                                                   Text="{Binding UrlDomainPath}">
                                            <!--<TextBlock.ToolTip>
                                                <TextBlock>
                                                    <TextBlock.Inlines>
                                                        <Run Text="Open Url Domain " />
                                                        <Run Text="{Binding UrlDomainPath}" />
                                                    </TextBlock.Inlines>
                                                </TextBlock>
                                            </TextBlock.ToolTip>
                                            <TextBlock.Inlines>
                                                <Hyperlink Background="Transparent"
                                                           IsEnabled="{Binding IsSelected}"
                                                           NavigateUri="{Binding UrlDomainPath}">
                                                    <Hyperlink.Inlines>
                                                        <Run Text="{Binding UrlDomainPath}" />
                                                    </Hyperlink.Inlines>
                                                </Hyperlink>
                                            </TextBlock.Inlines>-->
                                        </TextBlock>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Width="90"
                                                    CanUserSort="True"
                                                    CanUserResize="True"
                                                    SortMemberPath="IsRejected"
                                                    Header="Excluded Url?">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Background="White"
                                                  BorderThickness="1"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  VerticalContentAlignment="Stretch"
                                                  IsEnabled="{Binding IsRejected,
                                                                      Converter={StaticResource BoolFlipConverter}}"
                                                  IsChecked="{Binding IsUrlRejected,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTemplateColumn Width="110"
                                                    CanUserSort="True"
                                                    CanUserResize="True"
                                                    SortMemberPath="IsRejected"
                                                    Header="Excluded Domain?">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox Background="White"
                                                  BorderThickness="1"
                                                  VerticalAlignment="Center"
                                                  HorizontalAlignment="Center"
                                                  VerticalContentAlignment="Stretch"
                                                  IsChecked="{Binding IsRejected,
                                                                      Mode=TwoWay,
                                                                      UpdateSourceTrigger=PropertyChanged}" />
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                    <Button Width="200"
                            Command="{Binding AddUrlCommand}">
                        <DockPanel>
                            <Image Source="{Binding .,
                                                    Source={StaticResource AddIcon},
                                                    Converter={StaticResource StringResourceToImageSourceConverter}}"
                                   DockPanel.Dock="Left"
                                   Width="20"
                                   Height="20" />
                            <Label DockPanel.Dock="Right"
                                   Content="Add Url" />
                        </DockPanel>
                    </Button>
                </StackPanel>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>
