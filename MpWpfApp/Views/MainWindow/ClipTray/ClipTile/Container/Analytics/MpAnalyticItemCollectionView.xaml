<local:MpUserControl x:Class="MpWpfApp.MpAnalyticItemCollectionView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:local="clr-namespace:MpWpfApp"
                     x:TypeArguments="local:MpAnalyticItemCollectionViewModel"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     d:DesignHeight="450"
                     d:DesignWidth="800"
                     d:DataContext="{d:DesignInstance local:MpAnalyticItemCollectionViewModel, IsDesignTimeCreatable=True}"
                     mc:Ignorable="d">
    <UserControl.Resources>
        <DataTemplate x:Key="TextAnalysis">
            <local:MpTextAnalysisDocument DataContext="{Binding}" />
        </DataTemplate>
        <DataTemplate x:Key="ImageAnalysis">
            <local:MpImageAnalysisDocument DataContext="{Binding}" />
        </DataTemplate>
        <local:MpAnalysisDocumentSelector x:Key="AnalysisDocumentSelector"
                                          ImageAnalysisTemplate="{StaticResource ImageAnalysis}"
                                          TextAnalysisTemplate="{StaticResource TextAnalysis}" />
    </UserControl.Resources>
    <!--<Grid MouseDown="Grid_MouseDown">
        <ContentControl Width="{Binding Parent.TileBorderWidth}"
                        Height="{Binding Parent.TileBorderHeight}"
                        Content="{Binding}"
                        ContentTemplateSelector="{StaticResource AnalysisDocumentSelector}" />
                  Width="{Binding HostClipTileViewModel.TileBorderWidth}"
                  Height="{Binding HostClipTileViewModel.TileBorderHeight}"
    </Grid>-->
    <local:MpClipBorder Margin="1"               
                        BorderThickness="{Binding Parent.Parent.TileBorderThickness}"
                        BorderBrush="{Binding Parent.Parent.TileBorderBrush}"
                        Height="{Binding Parent.Parent.TileBorderHeight}"
                        CornerRadius="10">
        <Grid>
            <TreeView Name="AnalyticTreeView"
                  TreeViewItem.Expanded="AnalyticTreeView_Expanded"
                  TreeViewItem.Collapsed="AnalyticTreeView_Collapsed"
                  Loaded="AnalyticTreeView_Loaded"
                  ItemsSource="{Binding Items}"
                  Background="Orange">
                <TreeView.Resources>
                    <HierarchicalDataTemplate DataType="{x:Type local:MpAnalyticItemViewModel}"
                                          ItemsSource="{Binding Parameters}">
                        <local:MpAnalyticItemView />
                    </HierarchicalDataTemplate>
                    <HierarchicalDataTemplate DataType="{x:Type local:MpAnalyticItemParameterViewModel}">
                        <local:MpAnalyticItemParameterView />
                    </HierarchicalDataTemplate>
                </TreeView.Resources>
                <TreeView.ItemContainerStyle>
                    <Style TargetType="TreeViewItem">
                        <Setter Property="IsSelected"
                            Value="{Binding IsSelected, Mode=TwoWay}" />
                        <Setter Property="IsExpanded"
                            Value="{Binding IsExpanded, Mode=TwoWay}" />
                        <Setter Property="FontWeight"
                            Value="Normal" />
                        <Style.Triggers>
                            <Trigger Property="IsSelected"
                                 Value="True">
                                <Setter Property="FontWeight"
                                    Value="Bold" />
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </TreeView.ItemContainerStyle>
            </TreeView>
        </Grid>
    </local:MpClipBorder>
</local:MpUserControl>
