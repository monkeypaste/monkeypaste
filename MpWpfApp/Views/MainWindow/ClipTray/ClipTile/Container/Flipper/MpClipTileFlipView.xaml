<UserControl x:Class="MpWpfApp.MpClipTileFlipView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:MpWpfApp"
             mc:Ignorable="d"
             Loaded="ClipTileFlipView_Loaded"
             d:DesignHeight="450"
             d:DesignWidth="800"
             d:DataContext="{d:DesignInstance local:MpClipTileViewModel, IsDesignTimeCreatable=True}">
    <UserControl.Resources>
        <local:MpClipTileView x:Key="ClipTileFront" />
        <local:MpContentItemAnalyticsView x:Key="ClipTileBack" />
        <Storyboard x:Key="FrontToBack">
            <DoubleAnimation Storyboard.TargetName="front"
                             Storyboard.TargetProperty="Angle"
                             From="0"
                             To="180"
                             Duration="0:0:1">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase Springiness="0.5"
                                 Oscillations="0" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="back"
                             Storyboard.TargetProperty="Angle"
                             From="180"
                             To="360"
                             Duration="0:0:1">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase Springiness="0.5"
                                 Oscillations="0" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
        <Storyboard x:Key="BackToFront">
            <DoubleAnimation Storyboard.TargetName="front"
                             Storyboard.TargetProperty="Angle"
                             From="180"
                             To="360"
                             Duration="0:0:1">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase Springiness="0.5"
                                 Oscillations="0" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
            <DoubleAnimation Storyboard.TargetName="back"
                             Storyboard.TargetProperty="Angle"
                             From="360"
                             To="540"
                             Duration="0:0:1">
                <DoubleAnimation.EasingFunction>
                    <ElasticEase Springiness="0.5"
                                 Oscillations="0" />
                </DoubleAnimation.EasingFunction>
            </DoubleAnimation>
        </Storyboard>
    </UserControl.Resources>
    <Viewport3D IsVisibleChanged="Viewport3D_IsVisibleChanged"
                Unloaded="Viewport3D_Unloaded"
                Width="{local:MpMeasurementsBinding ClipTileMinSize}"
                Height="{local:MpMeasurementsBinding ClipTileMinSize}">
        <Viewport3D.Camera>
            <OrthographicCamera Position="0,0,3"
                                LookDirection="0,0,-1" />
            <!--<PerspectiveCamera FieldOfView="37" Position="0, 0, 3" />-->
        </Viewport3D.Camera>
        <Viewport3D.Children>
            <ModelVisual3D>
                <ModelVisual3D.Content>
                    <AmbientLight Color="#FFFFFFFF" />
                </ModelVisual3D.Content>
            </ModelVisual3D>
            <!--  Analytics View (Back)  -->
            <Viewport2DVisual3D>
                <Viewport2DVisual3D.Transform>
                    <RotateTransform3D>
                        <RotateTransform3D.Rotation>
                            <AxisAngleRotation3D x:Name="back"
                                                 Axis="0, 1, 0"
                                                 Angle="180" />
                        </RotateTransform3D.Rotation>
                    </RotateTransform3D>
                </Viewport2DVisual3D.Transform>
                <Viewport2DVisual3D.Geometry>
                    <MeshGeometry3D Positions="-1 -1 0  1 -1 0  -1 1 0  1 1 0"
                                    Normals="0 0 1  0 0 1  0 0 1  0 0 1"
                                    TextureCoordinates="0 1  1 1  0 0  1 0   "
                                    TriangleIndices="0 1 2  1 3 2" />
                </Viewport2DVisual3D.Geometry>
                <Viewport2DVisual3D.Material>
                    <DiffuseMaterial Viewport2DVisual3D.IsVisualHostMaterial="True" />
                </Viewport2DVisual3D.Material>
                <ContentControl DataContext="{Binding PrimaryItem}"
                                Content="{StaticResource ClipTileBack}" />
            </Viewport2DVisual3D>
            <!--  Content View (Front)  -->
            <Viewport2DVisual3D>
                <Viewport2DVisual3D.Transform>
                    <RotateTransform3D>
                        <RotateTransform3D.Rotation>
                            <AxisAngleRotation3D x:Name="front"
                                                 Axis="0, 1, 0"
                                                 Angle="0" />
                        </RotateTransform3D.Rotation>
                    </RotateTransform3D>
                </Viewport2DVisual3D.Transform>
                <Viewport2DVisual3D.Geometry>
                    <MeshGeometry3D Positions="-1 -1 0  1 -1 0  -1 1 0  1 1 0"
                                    Normals="0 0 1  0 0 1  0 0 1  0 0 1"
                                    TextureCoordinates="0 1  1 1  0 0  1 0   "
                                    TriangleIndices="0 1 2  1 3 2" />
                </Viewport2DVisual3D.Geometry>
                <Viewport2DVisual3D.Material>
                    <DiffuseMaterial Viewport2DVisual3D.IsVisualHostMaterial="True" />
                </Viewport2DVisual3D.Material>
                <ContentControl Content="{StaticResource ClipTileFront}" />
            </Viewport2DVisual3D>
        </Viewport3D.Children>
    </Viewport3D>
</UserControl>
