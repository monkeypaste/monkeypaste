<local:MpUserControl x:Class="MpWpfApp.MpSearchCriteriaOptionView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:local="clr-namespace:MpWpfApp"
                     x:TypeArguments="local:MpSearchCriteriaOptionViewModel"
                     mc:Ignorable="d"
                     d:DesignHeight="450"
                     d:DesignWidth="800"
                     d:DataContext="{d:DesignInstance Type=local:MpSearchCriteriaOptionViewModel,
                                                      IsDesignTimeCreatable=False}">
    <Grid Margin="0,3">
        <Grid.Resources>
            <DataTemplate x:Key="EnumerableOption"
                          DataType="local:MpSearchCriteriaOptionViewModel">
                <local:MpClipBorder CornerRadius="15">
                    <ComboBox IsSynchronizedWithCurrentItem="True"
                              MinWidth="85"
                              ItemsSource="{Binding Items}"
                              SelectedItem="{Binding SelectedItem,
                                                     Mode=TwoWay,
                                                     UpdateSourceTrigger=PropertyChanged}">
                        <ComboBox.ItemTemplate>
                            <ItemContainerTemplate>
                                <TextBlock FontSize="16"
                                           HorizontalAlignment="Center"
                                           Padding="3"
                                           Text="{Binding Label}" />
                            </ItemContainerTemplate>
                        </ComboBox.ItemTemplate>
                        <!--<ComboBox.ItemContainerStyle>
                        <Style TargetType="ComboBoxItem">
                            <Setter Property="IsSelected"
                                    Value="{Binding IsSelected,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged,
                                                    NotifyOnTargetUpdated=True,
                                                    NotifyOnSourceUpdated=True}" />
                        </Style>
                    </ComboBox.ItemContainerStyle>-->
                    </ComboBox>
                </local:MpClipBorder>
            </DataTemplate>
            <DataTemplate x:Key="TextOption"
                          DataType="local:MpSearchCriteriaOptionViewModel">
                <StackPanel Orientation="Horizontal">
                    <StackPanel Orientation="Horizontal"
                                Visibility="{Binding IsCheckable,
                                                     Converter={StaticResource BoolToVisibilityConverter}}">
                        <Label Content="Case-Sensitive?" />
                        <CheckBox VerticalAlignment="Center"
                                  Margin="0,0,5,0"
                                  IsChecked="{Binding IsChecked,
                                                      Mode=TwoWay}" />
                    </StackPanel>
                    <local:MpClipBorder Margin="5"
                                        CornerRadius="10"
                                        Background="WHite"
                                        BorderBrush="White">
                        <TextBox MinWidth="900"
                                 Margin="3,0,0,0"
                                 Height="23"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 BorderBrush="Black"
                                 Text="{Binding Value,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    </local:MpClipBorder>
                </StackPanel>
            </DataTemplate>
            <DataTemplate x:Key="RGBAOption"
                          DataType="local:MpSearchCriteriaOptionViewModel">
                <StackPanel Orientation="Horizontal">
                    <StackPanel Orientation="Horizontal">
                        <Label Content="R" />
                        <TextBox MinWidth="20"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 BorderBrush="Black"
                                 Text="{Binding Value1,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="G" />
                        <TextBox MinWidth="20"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 BorderBrush="Black"
                                 Text="{Binding Value2,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="B" />
                        <TextBox MinWidth="20"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 BorderBrush="Black"
                                 Text="{Binding Value3,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="A" />
                        <TextBox MinWidth="20"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 BorderBrush="Black"
                                 Text="{Binding Value4,
                                                Mode=TwoWay,
                                                NotifyOnSourceUpdated=True,
                                                NotifyOnTargetUpdated=True,
                                                UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </StackPanel>
            </DataTemplate>
            <DataTemplate x:Key="DateOption"
                          DataType="local:MpSearchCriteriaOptionViewModel">
                <DatePicker Width="300"
                            Height="23"
                            Loaded="DatePicker_Loaded"
                            SelectedDate="{Binding Value,
                                                   Converter={StaticResource StringToDateTimeConverter}}"
                            SelectedDateFormat="Long" />
            </DataTemplate>
            <DataTemplate x:Key="EmptyOption"
                          DataType="local:MpSearchCriteriaOptionViewModel" />
            <local:MpSearchCriteriaOptionViewSelector x:Key="OptionViewSelector"
                                                      EnumerableTemplate="{StaticResource EnumerableOption}"
                                                      TextTemplate="{StaticResource TextOption}"
                                                      DateTemplate="{StaticResource DateOption}"
                                                      RGBATemplate="{StaticResource RGBAOption}"
                                                      EmptyTemplate="{StaticResource EmptyOption}" />
        </Grid.Resources>
        <local:MpClipBorder BorderThickness="0"
                            Background="Transparent"
                            Padding="0"
                            CornerRadius="0">
            <ContentControl Content="{Binding}"
                            ContentTemplateSelector="{StaticResource OptionViewSelector}" />
        </local:MpClipBorder>
    </Grid>
</local:MpUserControl>
