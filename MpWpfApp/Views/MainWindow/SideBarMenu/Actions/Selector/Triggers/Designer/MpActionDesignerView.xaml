<local:MpUserControl x:Class="MpWpfApp.MpActionDesignerView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
                     xmlns:sys="clr-namespace:System;assembly=mscorlib"
                     xmlns:local="clr-namespace:MpWpfApp"
                     x:TypeArguments="local:MpTriggerActionViewModelBase"
                     mc:Ignorable="d"
                     d:DataContext="{d:DesignInstance Type=local:MpTriggerActionViewModelBase,
                                                      IsDesignTimeCreatable=False}">
    <Grid HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch"
          Background="Pink">
        <ItemsControl x:Name="ActionDesignerItemscontrol"
                      HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch"
                      ItemsSource="{Binding SelectedItem,
                                            Converter={StaticResource ItemToItemsSourceConverter},
                                            Source={x:Static local:MpActionCollectionViewModel.Instance}}">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas x:Name="ActionDesignerCanvas"
                            IsItemsHost="True" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemContainerStyle>
                <Style TargetType="ContentPresenter">
                    <Setter Property="Canvas.Left"
                            Value="{Binding X,
                                            Mode=TwoWay,
                                            UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnSourceUpdated=True,
                                            NotifyOnTargetUpdated=True}" />
                    <Setter Property="Canvas.Top"
                            Value="{Binding Y,
                                            Mode=TwoWay,
                                            UpdateSourceTrigger=PropertyChanged,
                                            NotifyOnSourceUpdated=True,
                                            NotifyOnTargetUpdated=True}" />
                </Style>
            </ItemsControl.ItemContainerStyle>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <local:MpActionDesignerItemView DataContext="{Binding}">
                        <i:Interaction.Behaviors>
                            <local:MpMoveBehavior IsMoving="{Binding IsMoving,
                                                                     Mode=TwoWay,
                                                                     UpdateSourceTrigger=PropertyChanged,
                                                                     NotifyOnSourceUpdated=True,
                                                                     NotifyOnTargetUpdated=True}"
                                                  CanMove="{Binding CanMove,
                                                                    Mode=TwoWay,
                                                                    UpdateSourceTrigger=PropertyChanged,
                                                                    NotifyOnSourceUpdated=True,
                                                                    NotifyOnTargetUpdated=True}" />
                        </i:Interaction.Behaviors>
                    </local:MpActionDesignerItemView>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</local:MpUserControl>
