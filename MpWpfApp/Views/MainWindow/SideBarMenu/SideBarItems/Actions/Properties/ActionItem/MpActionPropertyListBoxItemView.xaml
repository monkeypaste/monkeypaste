<local:MpUserControl x:Class="MpWpfApp.MpActionPropertyListBoxItemView"
                     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                     xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
                     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                     xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                     xmlns:dd="clr-namespace:GongSolutions.Wpf.DragDrop;assembly=GongSolutions.Wpf.DragDrop"
                     xmlns:sys="clr-namespace:System;assembly=mscorlib"
                     xmlns:pcl="clr-namespace:MonkeyPaste;assembly=MonkeyPaste"
                     xmlns:local="clr-namespace:MpWpfApp"
                     x:TypeArguments="local:MpActionViewModelBase"
                     mc:Ignorable="d"
                     d:DataContext="{d:DesignInstance Type=local:MpActionViewModelBase,
                                                      IsDesignTimeCreatable=False}">
    <Expander x:Name="ActionExpander"
              Padding="5,0"
              Background="{Binding ActionBackgroundHexColor,
                                   Converter={StaticResource StringHexToBrushConverter}}"
              IsExpanded="{Binding IsExpanded,
                                   Mode=TwoWay}">
        <Expander.Header>
            <local:MpActionPropertyHeaderView DataContext="{Binding}" />
        </Expander.Header>
        <Grid>
            <Border Grid.Row="2"
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch"
                    BorderBrush="Black"
                    BorderThickness="1"
                    CornerRadius="0"
                    Background="Transparent"
                    Margin="0,0,0,5">
                <Border.Resources>
                    <!--  Triggers  -->

                    <!--  Content Add  -->
                    <DataTemplate x:Key="ContentAddPropertiesTemplate"
                                  DataType="{x:Type local:MpContentAddTriggerViewModel}">
                        <local:MpContentAddTriggerPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>

                    <!--  Content Tagged  -->
                    <DataTemplate x:Key="ContentTaggedPropertiesTemplate"
                                  DataType="{x:Type local:MpContentTaggedTriggerViewModel}">
                        <local:MpContentTaggedTriggerPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>

                    <!--  File System Changed  -->
                    <DataTemplate x:Key="FileSystemPropertiesTemplate"
                                  DataType="{x:Type local:MpFileSystemTriggerViewModel}">
                        <local:MpFileSystemTriggerPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>

                    <!--  Triggers END  -->

                    <!--  Compare  -->
                    <DataTemplate x:Key="ComparePropertiesTemplate"
                                  DataType="{x:Type local:MpCompareActionViewModelBase}">
                        <local:MpCompareActionPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>
                    <!--  Analyze  -->
                    <DataTemplate x:Key="AnalyzePropertiesTemplate"
                                  DataType="{x:Type local:MpAnalyzeActionViewModel}">
                        <local:MpAnalyzeActionPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>
                    <!--  Classify  -->
                    <DataTemplate x:Key="ClassifyPropertiesTemplate"
                                  DataType="{x:Type local:MpClassifyActionViewModel}">
                        <local:MpClassifyActionPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>

                    <!--  File Writer  -->
                    <DataTemplate x:Key="FileWriterPropertiesTemplate"
                                  DataType="{x:Type local:MpFileWriterActionViewModel}">
                        <local:MpFileWriterActionPropertyListBoxItemView DataContext="{Binding}" />
                    </DataTemplate>
                    <local:MpActionItemPropertiesTemplateSelector x:Key="ActionTemplateSelector" />
                </Border.Resources>
                <DockPanel LastChildFill="True">
                    <Grid DockPanel.Dock="Bottom"
                          Margin="5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.5*" />
                            <ColumnDefinition Width="0.5*" />
                        </Grid.ColumnDefinitions>
                        <Button Grid.Column="0"
                                MinHeight="25"
                                Margin="0,0,5,0"
                                HorizontalAlignment="Stretch"
                                Background="Crimson"
                                Foreground="Cornsilk"
                                Style="{StaticResource RoundedButton}"
                                Command="{Binding DeleteThisActionCommand}"
                                CommandParameter="{Binding}">
                            <DockPanel LastChildFill="True">
                                <Image Source="{Binding .,
                                                        Converter={StaticResource StringResourceToImageSourceConverter},
                                                        Source={StaticResource TrashCanIcon}}"
                                       DockPanel.Dock="Left"
                                       Width="15"
                                       Height="15" />
                                <Label DockPanel.Dock="Right"
                                       Content="Delete" />
                            </DockPanel>
                        </Button>

                        <Button Grid.Column="1"
                                BorderThickness="0"
                                Margin="5,0,0,0"
                                Background="Beige"
                                Style="{StaticResource RoundedButton}"
                                HorizontalAlignment="Stretch"
                                Command="{Binding ShowActionSelectorMenuCommand}"
                                CommandParameter="{Binding RelativeSource={RelativeSource Self}}">
                            <DockPanel LastChildFill="True">
                                <Image Source="{Binding .,
                                                        Converter={StaticResource StringResourceToImageSourceConverter},
                                                        Source={StaticResource AddIcon}}"
                                       DockPanel.Dock="Left"
                                       Width="15"
                                       Height="15" />
                                <Label DockPanel.Dock="Right"
                                       Content="Add" />
                            </DockPanel>
                        </Button>
                    </Grid>
                    <ContentControl x:Name="RootActionPropertyContentControl"
                                    Content="{Binding}"
                                    ContentTemplateSelector="{StaticResource ActionTemplateSelector}" />
                </DockPanel>
            </Border>
        </Grid>
    </Expander>
</local:MpUserControl>
