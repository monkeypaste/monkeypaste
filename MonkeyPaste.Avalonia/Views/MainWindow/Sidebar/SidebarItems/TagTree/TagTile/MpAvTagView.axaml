<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:sys="clr-namespace:System;assembly=mscorlib"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       x:TypeArguments="local:MpAvTagTileViewModel"
                       x:DataType="local:MpAvTagTileViewModel"
                       x:CompileBindings="True"
                       mc:Ignorable="d"
                       x:Class="MonkeyPaste.Avalonia.MpAvTagView">
    <Grid x:Name="TagViewContainerDockPanel"
          ClipToBounds="False"
          local:MpAvIsHoveringExtension.IsEnabled="True"
          local:MpAvIsHoveringExtension.IsHovering="{Binding IsHovering, Mode=TwoWay}"
          local:MpAvIsHoveringExtension.HoverCursor="Hand"
          local:MpAvMenuExtension.IsEnabled="True"
          local:MpAvMenuExtension.SelectOnRightClick="False"
          local:MpAvMenuExtension.IsOpen="{Binding IsContextMenuOpened, Mode=TwoWay}"
          local:MpAvPointerPressCommandExtension.IsEnabled="True"
          local:MpAvPointerPressCommandExtension.LeftPressCommand="{Binding SelectTagCommand}"
          local:MpAvPointerPressCommandExtension.DoubleLeftPressCommand="{Binding RenameTagCommand}"
          Cursor="Hand"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch"
          Height="30">
        <local:MpAvClipBorder x:Name="TagNameBorder"
                              CornerRadius="7"
                              Margin="5,0,0,0"
                              Padding="1"
                              VerticalAlignment="Stretch"
                              HorizontalAlignment="Left"
                              MinHeight="20"
                              Background="{Binding TagBorderBackgroundHexColor, Converter={StaticResource StringHexToBrushConverter}}"
                              BorderBrush="{Binding TagBorderHexColor, Converter={StaticResource StringHexToBrushConverter}}"
                              BorderDashArray="{Binding TagBorderDashArray, Converter={StaticResource DoubleArrayToAvListConverter}}"
                              BorderDashOffset="{Binding TagBorderDashOffset}"
                              BorderThickness="1.5">
            <StackPanel Orientation="Horizontal">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <!--  Tag Count Box  -->
                    <local:MpAvClipBorder CornerRadius="5"
                                          Grid.Column="0"
                                          MinWidth="20"
                                          Margin="1"
                                          Padding="4,1"
                                          BorderThickness="0"
                                          Background="{Binding TagHexColor, Converter={StaticResource StringHexToBrushConverter}}">
                        <TextBlock Background="Transparent"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"
                                   Text="{Binding TagClipCount}"
                                   Foreground="{Binding TagCountTextHexColor, Converter={StaticResource StringHexToBrushConverter}}" />

                    </local:MpAvClipBorder>
                    <!--  Tag Name TextBox/ Marquee  -->
                    <Grid Grid.Column="1"
                          HorizontalAlignment="Left"
                          Margin="5,0,0,0"
                          MaxWidth="100">
                        <!--  TextControlThemePadding  -->
                        <TextBox x:Name="TagNameTextBox"
                                 local:MpAvIsFocusedExtension.IsEnabled="True"
                                 local:MpAvIsFocusedExtension.SelectViewModelOnFocus="False"
                                 local:MpAvIsFocusedExtension.IsFocused="{Binding IsTagNameTextBoxFocused, Mode=TwoWay}"
                                 local:MpAvMarqueeTextBoxExtension.IsEnabled="True"
                                 local:MpAvMarqueeTextBoxExtension.EditOnMouseClick="False"
                                 local:MpAvMarqueeTextBoxExtension.CancelEditCommand="{Binding CancelRenameTagCommand}"
                                 local:MpAvMarqueeTextBoxExtension.FinishEditCommand="{Binding FinishRenameTagCommand}"
                                 local:MpAvMarqueeTextBoxExtension.IsReadOnly="{Binding IsTagNameReadOnly, Mode=TwoWay}"
                                 local:MpAvMarqueeTextBoxExtension.Margin="0,2.5,0,0"
                                 Background="White"
                                 Foreground="Black"
                                 MinHeight="0"
                                 Margin="0"
                                 Padding="0"
                                 BorderThickness="0"
                                 HorizontalAlignment="Center"
                                 VerticalAlignment="Center"
                                 IsReadOnly="{Binding IsTagNameReadOnly, Mode=OneWay}"
                                 FontSize="16"
                                 Text="{Binding TagName, Mode=TwoWay}">

                            <TextBox.Resources>
                                <Thickness x:Key="TextControlThemePadding">
                                    0,0,0,0
                                </Thickness>
                                <x:Double x:Key="TextControlThemeMinHeight">
                                    0
                                </x:Double>
                            </TextBox.Resources>
                        </TextBox>
                    </Grid>
                </Grid>
            </StackPanel>
        </local:MpAvClipBorder>

        <Border Background="Red"
                MinWidth="10"
                Height="10"
                BorderThickness="1"
                BorderBrush="White"
                VerticalAlignment="Top"
                HorizontalAlignment="Left"
                IsVisible="{Binding CopyItemIdsNeedingView, Converter={StaticResource CollectionIsNotEmptyToBoolConverter}}">
            <TextBlock Foreground="White"
                       FontSize="9"
                       Text="{Binding CopyItemIdsNeedingView, Converter={StaticResource CollectionCountToStringConverter}}" />
        </Border>
    </Grid>
</local:MpAvUserControl>
