<local:MpAvUserControl x:Class="MonkeyPaste.Avalonia.MpAvActionDesignerView"
                       xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:sys="clr-namespace:System;assembly=mscorlib"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       x:CompileBindings="True"
                       x:TypeArguments="local:MpAvActionCollectionViewModel"
                       x:DataType="local:MpAvActionCollectionViewModel"
                       mc:Ignorable="d">
    <Border Background="{DynamicResource ActionDesignerBgBrush}">
        <Grid>
            <Grid.Styles>
                <Style Selector="ListBox.actionDesigner ListBoxItem"
                       x:DataType="local:MpAvActionViewModelBase">
                    <Setter Property="IsSelected"
                            Value="{Binding IsSelected, Mode=TwoWay}" />
                </Style>
            </Grid.Styles>
            <local:MpAvZoomBorder ClipToBounds="True"
                                  HorizontalAlignment="Stretch"
                                  VerticalAlignment="Stretch"
                                  IsVisible="{Binding Items, Converter={StaticResource CollectionIsNotEmptyToBoolConverter}}"
                                  Classes="actionDesigner"
                                  DataContext="{Binding}"
                                  DesignerItem="{Binding SelectedItem}"
                                  ShowGrid="True"
                                  OriginThickness="1.5"
                                  GridLineThickness="0.5"
                                  GridLineSpacing="50"
                                  OriginBrush="Chocolate"
                                  GridLineBrush="BurlyWood">
                <ListBox x:Name="ActionDesignerListBox"
                         Classes="actionDesigner"
                         Items="{Binding AllSelectedItemActions}">
                    <ListBox.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleX="{Binding ScaleX, Mode=OneWayToSource}"
                                            ScaleY="{Binding ScaleY, Mode=OneWayToSource}" />
                            <TranslateTransform />
                        </TransformGroup>
                    </ListBox.RenderTransform>
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <local:MpAvDesignerCanvas x:Name="ActionDesignerCanvas"
                                                      ClipToBounds="False"
                                                      TipLength="20"
                                                      TipWidth="10"
                                                      TailWidth="3"
                                                      TransitionLineThickness="1" />
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.Styles>
                        <Style Selector="ListBoxItem"
                               x:DataType="local:MpAvActionViewModelBase">
                            <!--<Setter Property="IsSelected"
                                        Value="{Binding IsSelected, Mode=TwoWay}" />-->
                            <Setter Property="Canvas.Left"
                                    Value="{Binding X, Mode=TwoWay}" />
                            <Setter Property="Canvas.Top"
                                    Value="{Binding Y, Mode=TwoWay}" />
                        </Style>
                    </ListBox.Styles>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <local:MpAvActionDesignerItemView DataContext="{Binding}" />
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </local:MpAvZoomBorder>

            <!--  ADD NEW TRIGGER BUTTON (EMPTY SELECTION)  -->

            <Button x:Name="AddNewActionButton"
                    IsVisible="{Binding Items, ConverterParameter=flip, Converter={StaticResource CollectionIsNotEmptyToBoolConverter}}"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Background="Transparent"
                    BorderThickness="0"
                    local:MpAvIsHoveringExtension.IsEnabled="True"
                    local:MpAvIsHoveringExtension.IsHovering="{Binding IsHovering, Mode=TwoWay}"
                    Command="{Binding ShowTriggerSelectorMenuCommand}"
                    CommandParameter="{Binding $self}">
                <StackPanel Orientation="Vertical">
                    <Grid>
                        <Ellipse Stroke="{Binding AddNewButtonBorderBrushHexColor}"
                                 Fill="Transparent"
                                 StrokeThickness="3"
                                 Width="50"
                                 Height="50" />
                        <Rectangle HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Fill="DimGray"
                                   Height="30"
                                   Width="3" />
                        <Rectangle HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   Fill="DimGray"
                                   Height="3"
                                   Width="30" />
                    </Grid>
                    <Label HorizontalAlignment="Center">
                        Add New
                    </Label>
                </StackPanel>
            </Button>
        </Grid>
    </Border>
</local:MpAvUserControl>
