<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="using:MonkeyPaste.Avalonia"
             xmlns:pcl="using:MonkeyPaste"
             x:DataType="local:MpAvSidebarItemCollectionViewModel"
             x:TypeArguments="local:MpAvSidebarItemCollectionViewModel"
             x:CompileBindings="True"
             DataContext="{x:Static local:MpAvSidebarItemCollectionViewModel.Instance}"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="450"
             x:Class="MonkeyPaste.Avalonia.MpAvSidebarSelectedItemView">
    <local:MpAvUserControl.Styles>
        <!--  MOBILE COLLAPSE  -->
        <Style Selector="Button#CollapseSidebarButton">
            <Setter Property="HorizontalAlignment"
                    Value="Center" />
            <Setter Property="VerticalAlignment"
                    Value="Top" />
            <Setter Property="Margin"
                    Value="0,15,0,0" />
        </Style>
        <Style Selector="Button#CollapseSidebarButton local|MpAvTintedImage">
            <Setter Property="Source"
                    Value="{Binding Source={StaticResource EdgeArrowDownImage}, ConverterParameter=test, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
        </Style>

        <Style Selector="Button#CollapseSidebarButton.horiz">
            <Setter Property="HorizontalAlignment"
                    Value="Right" />
            <Setter Property="VerticalAlignment"
                    Value="Center" />
            <Setter Property="Margin"
                    Value="0,0,15,0" />
        </Style>
        <Style Selector="Button#CollapseSidebarButton.horiz local|MpAvTintedImage">
            <Setter Property="Source"
                    Value="{Binding Source={StaticResource EdgeArrowLeftImage}, ConverterParameter=test, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
        </Style>
        <!--  MOBILE CONTENT CONTROL EDGE EFFECTS  -->
        <Style Selector="ContentControl#SelectedSidebarContentControl">
            <Setter Property="Background"
                    Value="{DynamicResource MainWindowBgBrush}" />
            <Setter Property="Transitions">
                <Setter.Value>
                    <Transitions>
                        <DoubleTransition Property="Height"
                                          Duration="0:0:2" />
                    </Transitions>
                </Setter.Value>
            </Setter>
        </Style>
        <Style Selector="ContentControl#SelectedSidebarContentControl.mobile">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeAccent5BgColor}" />
            <Setter Property="Effect"
                    Value="drop-shadow(0 0 15 Black)" />
            <Setter Property="Margin"
                    Value="5,10,5,0" />
            <Setter Property="CornerRadius"
                    Value="20,20,0,0" />
        </Style>
        <Style Selector="ContentControl#SelectedSidebarContentControl.mobile.horiz">
            <Setter Property="Effect"
                    Value="drop-shadow(0 0 15 Black)" />
            <Setter Property="Margin"
                    Value="0,5,10,5" />
            <Setter Property="CornerRadius"
                    Value="0,20,20,0" />
        </Style>
        <Style Selector="ContentControl#SelectedSidebarContentControl.mobile /template/ ScrollViewer">
            <Setter Property="IsScrollChainingEnabled"
                    Value="False" />
        </Style>
    </local:MpAvUserControl.Styles>
    <Grid x:Name="OuterContainer"
          Classes="oriented">
        <ContentControl x:Name="SelectedSidebarContentControl"
                        x:DataType="local:MpISidebarItemViewModel"
                        DataContext="{Binding BoundItem}"
                        ScrollViewer.BringIntoViewOnFocusChange="False"
                        Classes.horiz="{Binding IsHorizontalOrientation, Source={x:Static local:MpAvMainWindowViewModel.Instance}}"
                        Classes.mobile="{Binding IsMobileOrWindowed, Source={x:Static local:MpAvThemeViewModel.Instance}}"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        VerticalContentAlignment="Stretch"
                        Background="{Binding SidebarBgHexColor, Converter={x:Static local:MpAvStringHexToBrushConverter.Instance}}"
                        local:MpAvSizeObserverExtension.IsEnabled="True"
                        local:MpAvSizeObserverExtension.ObservedWidth="{Binding SidebarWidth, Mode=OneWayToSource}"
                        local:MpAvSizeObserverExtension.ObservedHeight="{Binding SidebarHeight, Mode=OneWayToSource}"
                        Content="{Binding}">
            <ContentControl.DataTemplates>
                <local:MpAvSidebarItemTemplateSelector>
                    <!--  TAG TREE  -->
                    <DataTemplate x:Key="TagTreeViewTemplate"
                                  x:DataType="local:MpAvTagTrayViewModel">
                        <local:MpAvTagTreeView Margin="0,0,0,0"
                                               HorizontalAlignment="Stretch"
                                               HorizontalContentAlignment="Stretch" />

                    </DataTemplate>

                    <!--  CLIPBOARD HANDLER  -->
                    <DataTemplate x:Key="ClipboardHandlerSelectorViewTemplate"
                                  x:DataType="local:MpAvClipboardHandlerCollectionViewModel">
                        <local:MpAvClipboardHandlerSelectorView HorizontalAlignment="Stretch"
                                                                HorizontalContentAlignment="Stretch" />


                    </DataTemplate>
                    <!--  ANALYZERS  -->
                    <DataTemplate x:Key="AnalyticItemSelectorViewTemplate"
                                  x:DataType="local:MpAvAnalyticItemCollectionViewModel">
                        <local:MpAvAnalyticItemSelectorView HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Stretch" />

                    </DataTemplate>
                    <!--  ACTIONS  -->
                    <DataTemplate x:Key="TriggerActionChooserViewTemplate"
                                  x:DataType="local:MpAvTriggerCollectionViewModel">

                        <local:MpAvTriggerActionChooserView IsVisible="{Binding !IsWindowOpen}"
                                                            HorizontalAlignment="Stretch"
                                                            HorizontalContentAlignment="Stretch" />
                    </DataTemplate>
                </local:MpAvSidebarItemTemplateSelector>
            </ContentControl.DataTemplates>
        </ContentControl>
        <Button x:Name="CollapseSidebarButton"
                Classes="default-button no-bg no-hover-bg no-border"
                Classes.horiz="{Binding IsHorizontalOrientation, Source={x:Static local:MpAvMainWindowViewModel.Instance}}"
                IsVisible="{Binding IsMobileOrWindowed, Source={x:Static local:MpAvThemeViewModel.Instance}}"
                Command="{Binding ToggleIsSidebarItemSelectedCommand}">
            <local:MpAvTintedImage Tint="{DynamicResource ThemeInteractiveBrush}" />
        </Button>
    </Grid>
</local:MpAvUserControl>
