<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       x:DataType="local:MpAvClipTileViewModel"
                       x:TypeArguments="local:MpAvClipTileViewModel"
                       x:CompileBindings="True"
                       mc:Ignorable="d"
                       d:DesignWidth="800"
                       d:DesignHeight="450"
                       HorizontalAlignment="Stretch"
                       VerticalAlignment="Stretch"
                       HorizontalContentAlignment="Stretch"
                       VerticalContentAlignment="Stretch"
                       x:Class="MonkeyPaste.Avalonia.MpAvClipTileView">
    <!--
        local:MpAvIsHoveringExtension.IsEnabled="True"
        local:MpAvIsHoveringExtension.IsHovering="{Binding IsHovering, Mode=TwoWay}"
        local:MpAvIsHoveringExtension.IsSelected="{Binding IsSelected, Mode=TwoWay}"
    -->
    <local:MpAvClipBorder x:Name="ClipTileContainerBorder"
                          ClipToBounds="True"
                          HorizontalAlignment="Stretch"
                          Classes.TileBorder="True"
                          Classes.TileHover="{Binding IsHovering}"
                          Classes.CanResize="{Binding CanResize}"
                          Classes.IsResizing="{Binding IsResizing}"
                          VerticalAlignment="Stretch"
                          local:MpAvMenuExtension.IsEnabled="True"
                          local:MpAvMenuExtension.SuppressDefaultRightClick="True"
                          local:MpAvMenuExtension.IsOpen="{Binding IsContextMenuOpened, Mode=TwoWay}"
                          local:MpAvPointerPressCommandExtension.IsEnabled="True"
                          local:MpAvPointerPressCommandExtension.DoubleLeftPressCommand="{Binding EnableSubSelectionCommand}"
                          ScrollViewer.HorizontalScrollBarVisibility="Hidden"
                          ScrollViewer.VerticalScrollBarVisibility="Hidden"
                          CornerRadius="{StaticResource TileCornerRadius}"
                          BorderThickness="{StaticResource TileBorderThickness}"
                          Background="{DynamicResource ClipTileContentBackgroundBrush}">
        <local:MpAvClipBorder.Styles>
            <Style Selector="PathIcon">
                <Setter Property="Width"
                        Value="8" />
                <Setter Property="Height"
                        Value="8" />
                <Setter Property="Foreground"
                        Value="Black" />
            </Style>
        </local:MpAvClipBorder.Styles>
        <Grid HorizontalAlignment="Stretch"
              VerticalAlignment="Stretch">
            <Grid.RowDefinitions>
                <RowDefinition Height="0.25*"
                               MaxHeight="40" />
                <RowDefinition Height="*" />
                <RowDefinition Height="20" />
            </Grid.RowDefinitions>
            <!--  Title  -->
            <local:MpAvClipTileTitleView x:Name="TileTitleView"
                                         Grid.Row="0"
                                         DataContext="{Binding}"
                                         HorizontalAlignment="Stretch"
                                         VerticalAlignment="Stretch"
                                         local:MpAvSizeObserverExtension.IsEnabled="False"
                                         local:MpAvSizeObserverExtension.ObservedHeight="{Binding TitleHeight, Mode=OneWayToSource}"
                                         IsVisible="{Binding IsTitleVisible}" />

            <!--  Content  -->
            <local:MpAvClipTileContentView x:Name="ClipTileContentView"
                                           Grid.Row="1"
                                           HorizontalAlignment="Stretch"
                                           VerticalAlignment="Stretch"
                                           DataContext="{Binding}" />

            <!--  Detail  -->
            <Grid Grid.Row="2"
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Bottom"
                  IsVisible="{Binding IsHovering}">
                <local:MpAvClipTileDetailView DataContext="{Binding DetailCollectionViewModel}"
                                              VerticalAlignment="Stretch"
                                              HorizontalAlignment="Stretch" />
            </Grid>
            <!--  Corner Button Overlay  -->
            <local:MpAvClipTileCornerButtonsView Grid.Row="0"
                                                 Grid.RowSpan="3"
                                                 IsVisible="{Binding IsHovering}"
                                                 HorizontalAlignment="Stretch"
                                                 VerticalAlignment="Stretch"
                                                 DataContext="{Binding}" />

            <Border x:Name="ClipTileResizeBorder"
                    Grid.Row="0"
                    Grid.RowSpan="3"
                    local:MpAvResizeExtension.MinHeight="{Binding MinHeight}"
                    local:MpAvResizeExtension.MaxHeight="{Binding MaxHeight}"
                    local:MpAvResizeExtension.MinWidth="{Binding MinWidth}"
                    local:MpAvResizeExtension.MaxWidth="{Binding MaxWidth}"
                    local:MpAvResizeExtension.BoundWidth="{Binding BoundWidth, Mode=TwoWay}"
                    local:MpAvResizeExtension.BoundHeight="{Binding BoundHeight, Mode=TwoWay}"
                    local:MpAvResizeExtension.DefaultWidth="{Binding MinWidth}"
                    local:MpAvResizeExtension.DefaultHeight="{Binding MinHeight}"
                    local:MpAvResizeExtension.CanResize="{Binding CanResize, Mode=TwoWay}"
                    local:MpAvResizeExtension.IsResizing="{Binding IsResizing, Mode=TwoWay}"
                    local:MpAvResizeExtension.XFactor="-1"
                    local:MpAvResizeExtension.YFactor="0"
                    local:MpAvResizeExtension.IsEnabled="True"
                    local:MpAvPointerPressCommandExtension.IsEnabled="True"
                    local:MpAvPointerPressCommandExtension.DoubleLeftPressCommand="{Binding ResetTileSizeToDefaultCommand}"
                    local:MpAvIsHoveringExtension.IsEnabled="True"
                    Cursor="SizeWestEast"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Stretch"
                    Width="10"
                    Background="Transparent">
                <Border.RenderTransform>
                    <TranslateTransform X="5" />
                </Border.RenderTransform>
            </Border>

            <!--  IsBusy Overlay  -->
            <Border Grid.Row="0"
                    Grid.RowSpan="3"
                    Cursor="Wait"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    IsVisible="False">
                <!--<Border.Background>
                    <SolidColorBrush Color="Black"
                                     Opacity="0.2" />
                </Border.Background>-->
                <!--<local:ProgressRing Width="50"
                                    Height="50"
                                    IsActive="True"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Foreground="Green" />-->
                <!--<Ellipse Fill="Transparent"
                         Stroke="DimGray"
                         StrokeThickness="10"
                         Width="50"
                         Height="50" />-->
                <Viewbox Width="30"
                         Height="30"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         Stretch="UniformToFill">
                    <!--<PathIcon Data="{StaticResource FinSvg}"
                              Background="Black" />-->
                    <Image>
                        <Image.Resources>
                            <SolidColorBrush x:Key="Brush0"
                                             Color="DimGray"
                                             Opacity="0.7" />
                        </Image.Resources>
                        <Image.Styles>
                            <Style Selector="Image">
                                <Style.Animations>
                                    <Animation Duration="0:0:0.30"
                                               IterationCount="Infinite"
                                               FillMode="None">
                                        <KeyFrame Cue="0%">
                                            <Setter Property="Opacity"
                                                    Value="0" />
                                        </KeyFrame>
                                        <KeyFrame Cue="50%">
                                            <Setter Property="Opacity"
                                                    Value="1" />
                                        </KeyFrame>
                                        <KeyFrame Cue="100%">
                                            <Setter Property="Opacity"
                                                    Value="1" />
                                        </KeyFrame>
                                    </Animation>
                                </Style.Animations>
                            </Style>
                        </Image.Styles>
                        <DrawingImage>
                            <DrawingGroup>
                                <GeometryDrawing Brush="{DynamicResource Brush0}"
                                                 Geometry="F1 M242.72 484.63C242.6 483.69 242.64 483.44 242.55 483.37C233.17 476.63 235.55 467.56 236.58 458.06C238.34 441.73 238.99 425.26 239.52 408.83C239.67 404.33 240.29 401.28 244.77 399.65C246.93 398.86 248.88 397.51 251.62 396.04C247.68 393.01 243.97 390.4 240.57 387.44C239.21 386.25 237.85 384.39 237.6 382.68C233.67 354.77 225.39 328.36 210.51 303.1C256.56 320.06 297.25 343.89 331.24 378.59C365.18 413.24 387.45 454.66 403.03 500.81C344.18 500.81 286.03 500.81 227.88 500.81C227.92 490.82 232.18 484.63 242.72 484.63Z" />
                            </DrawingGroup>
                        </DrawingImage>
                    </Image>
                </Viewbox>
                <!--    -->
            </Border>

            <!--  Trial Expired Overlay  -->
            <Border HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch"
                    IsVisible="False">
                <Border.Background>
                    <SolidColorBrush Color="Black"
                                     Opacity="0.2" />
                </Border.Background>

                <Viewbox Stretch="Uniform"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         Width="50"
                         Height="50"
                         IsVisible="{Binding IsPinned}">
                    <Path Fill="Wheat"
                          Data="{StaticResource LockSvg}" />
                </Viewbox>
            </Border>
        </Grid>
    </local:MpAvClipBorder>
</local:MpAvUserControl>
