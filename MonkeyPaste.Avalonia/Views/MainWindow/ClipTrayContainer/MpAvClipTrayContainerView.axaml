<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       x:TypeArguments="local:MpAvClipTrayViewModel"
                       x:DataType="local:MpAvClipTrayViewModel"
                       x:CompileBindings="True"
                       DataContext="{x:Static local:MpAvClipTrayViewModel.Instance}"
                       mc:Ignorable="d"
                       d:DesignWidth="800"
                       d:DesignHeight="450"
                       x:Class="MonkeyPaste.Avalonia.MpAvClipTrayContainerView">


    <local:MpAvUserControl.Styles>

        <!--  TRAY CURSOR  -->

        <Style Selector="Grid#ClipTrayContainerGrid.busy"
               x:DataType="local:MpAvClipTrayViewModel">
            <Setter Property="Cursor"
                    Value="Wait" />
        </Style>
        <Style Selector="Grid#ClipTrayContainerGrid:not(.busy)"
               x:DataType="local:MpAvClipTrayViewModel">
            <Setter Property="Cursor"
                    Value="Arrow" />
        </Style>

        <!--  TILE LBI SIZE  -->

        <Style Selector="ListBox.clipTileListBox > ListBoxItem"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="Padding"
                    Value="{StaticResource TileInnerSpacing}" />
            <Setter Property="Width"
                    Value="{Binding BoundWidth}" />
            <Setter Property="Height"
                    Value="{Binding BoundHeight}" />
        </Style>

        <!--  TILE BORDER TRANSITIONS  -->

        <Style Selector=":is(Border).TileBorder"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="Transitions">
                <Transitions>
                    <BrushTransition Property="BorderBrush"
                                     Duration="0:0:0.2" />
                </Transitions>
            </Setter>
            <Setter Property="BorderBrush"
                    Value="{StaticResource DefaultBorderBrush_unselected}" />
        </Style>

        <!--  HOVER UNSELECTED  -->
        <Style Selector="ListBox.clipTileListBox > ListBoxItem:pointerover:not(:selected) :is(Border).TileBorder"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="BorderBrush"
                    Value="{StaticResource IsHoveringBorderBrush_unselected}" />
        </Style>

        <!--  DEFAULT SELECTED  -->
        <Style Selector="ListBox.clipTileListBox > ListBoxItem:selected :is(Border).TileBorder"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="BorderBrush"
                    Value="{StaticResource DefaultBorderBrush_selected}" />
        </Style>

        <!--  HOVER SELECTED  -->
        <Style Selector="ListBox.clipTileListBox > ListBoxItem:pointerover:selected :is(Border).TileBorder"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="BorderBrush"
                    Value="{StaticResource IsHoveringBorderBrush_selected}" />
        </Style>

        <!--  DEFAULT RESIZE  -->
        <Style Selector=":is(Border).TileBorder.IsResizing"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="BorderBrush"
                    Value="{StaticResource IsResizingBorderBrush}" />
        </Style>

        <!--  HOVER RESIZE  -->
        <Style Selector="ListBox.clipTileListBox > ListBoxItem:selected:pointerover :is(Border).TileBorder.CanResize:not(.IsResizing)"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="BorderBrush"
                    Value="{StaticResource CanResizeBorderBrush}" />
        </Style>

        <!--  TILE FOCUS  -->
        <Style Selector="ListBox.clipTileListBox > ListBoxItem"
               x:DataType="local:MpAvClipTileViewModel">
            <Setter Property="local:MpAvIsFocusedExtension.IsEnabled"
                    Value="True" />
            <Setter Property="local:MpAvIsFocusedExtension.IsFocused"
                    Value="{Binding IsListBoxItemFocused, Mode=OneWay}" />
        </Style>
    </local:MpAvUserControl.Styles>
    <!--  NOTE! Layout is in mw code behind orientation change  -->
    <Grid x:Name="ClipTrayContainerGrid"
          Classes.busy="{Binding IsAnyBusy}"
          HorizontalAlignment="Stretch"
          VerticalAlignment="Stretch">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <!--  PIN TRAY  -->
        <local:MpAvPinTrayView x:Name="PinTrayView"
                               Grid.Column="0"
                               DataContext="{Binding}"
                               Classes.dragover="{Binding IsDragOverPinTray}"
                               MinWidth="{Binding MinPinTrayScreenWidth}"
                               MinHeight="{Binding MinPinTrayScreenHeight}"
                               MaxWidth="{Binding MaxPinTrayScreenWidth}"
                               MaxHeight="{Binding MaxPinTrayScreenHeight}"
                               local:MpAvSizeObserverExtension.IsEnabled="True"
                               local:MpAvSizeObserverExtension.ObservedWidth="{Binding ObservedPinTrayScreenWidth, Mode=OneWayToSource}"
                               local:MpAvSizeObserverExtension.ObservedHeight="{Binding ObservedPinTrayScreenHeight, Mode=OneWayToSource}" />
        <!--  PIN/QUERY SPLITTER  -->
        <GridSplitter x:Name="ClipTraySplitter"
                      Grid.Column="0"
                      IsTabStop="False"
                      Classes.clipTraySplitter="True"
                      Classes.vertical="{Binding !IsVerticalOrientation, Source={x:Static local:MpAvMainWindowViewModel.Instance}}"
                      Classes.horizontal="{Binding IsVerticalOrientation, Source={x:Static local:MpAvMainWindowViewModel.Instance}}" />

        <!--  QUERY TRAY  -->
        <local:MpAvQueryTrayView x:Name="ClipTrayView"
                                 Grid.Column="1"
                                 Background="{DynamicResource ClipTrayBgColor}"
                                 DataContext="{Binding}" />
    </Grid>
</local:MpAvUserControl>
