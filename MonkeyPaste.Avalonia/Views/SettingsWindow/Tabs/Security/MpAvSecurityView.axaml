<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       mc:Ignorable="d"
                       d:DesignWidth="800"
                       d:DesignHeight="750"
                       xmlns:sys="clr-namespace:System;assembly=mscorlib"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       x:TypeArguments="local:MpAvSettingsViewModel"
                       x:DataType="local:MpAvSettingsViewModel"
                       x:CompileBindings="True"
                       DataContext="{x:Static local:MpAvSettingsViewModel.Instance}"
                       x:Class="MonkeyPaste.Avalonia.MpAvSecurityView">
    <local:MpAvUserControl.Styles>
        <Style Selector="Label.h1">
            <Setter Property="Margin"
                    Value="0,10,0,0" />
        </Style>
        <!--  DATAGRID  -->
        <Style Selector="DockPanel.dataPanel">
            <Setter Property="Margin"
                    Value="10" />
        </Style>

        <!--  ADD SOURCE BUTTONS  -->
        <Style Selector="Button.sourceAddButton">
            <Setter Property="HorizontalAlignment"
                    Value="Right" />
            <Setter Property="Width"
                    Value="150" />
            <Setter Property="Margin"
                    Value="0, 10" />
        </Style>
        <Style Selector="Button.sourceAddButton DockPanel Image">
            <Setter Property="Margin"
                    Value="2" />
        </Style>
    </local:MpAvUserControl.Styles>

    <StackPanel Grid.Column="0"
                Orientation="Vertical"
                ScrollViewer.VerticalScrollBarVisibility="Auto"
                ScrollViewer.HorizontalScrollBarVisibility="Auto">

        <!--  APPS  -->

        <Label Classes="h1"
               Content="Applications" />
        <Border Classes="labelUnderline" />
        <DockPanel Classes="dataPanel"
                   VerticalAlignment="Top"
                   x:DataType="local:MpAvAppCollectionViewModel"
                   DataContext="{x:Static local:MpAvAppCollectionViewModel.Instance}">
            <Button DockPanel.Dock="Bottom"
                    HorizontalAlignment="Right"
                    Classes="defaultButton iconTextButton sourceAddButton"
                    Command="{Binding AddAppCommand}">
                <DockPanel>
                    <Image DockPanel.Dock="Left"
                           Source="{Binding Source={StaticResource AddImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                    <Label Content="Add Application" />
                </DockPanel>
            </Button>
            <DataGrid Grid.Row="1"
                      x:Name="ExcludedAppDatagrid"
                      Items="{Binding FilteredItems}"
                      SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                      Focusable="True"
                      IsReadOnly="False">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Width="30">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Width="15"
                                       Height="15"
                                       Source="{Binding IconId, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Name"
                                            CanUserSort="True"
                                            SortMemberPath="AppName"
                                            CanUserResize="True"
                                            Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid Classes="marqueeContainer">
                                    <local:MpAvMarqueeTextBox EditOnFocus="False"
                                                              DropShadowBrush="Transparent"
                                                              ReadOnlyForeground="Black"
                                                              SelectViewModelOnFocus="False"
                                                              Text="{Binding AppName}" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Process Path"
                                            CanUserSort="True"
                                            SortMemberPath="AppPath"
                                            CanUserResize="True"
                                            Width="200">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid Classes="marqueeContainer">
                                    <local:MpAvMarqueeTextBox EditOnFocus="False"
                                                              DropShadowBrush="Transparent"
                                                              ReadOnlyForeground="Black"
                                                              NavigateUri="{Binding AppPath, Converter={x:Static local:MpAvFileToFolderPathConverter.Instance}}"
                                                              Text="{Binding AppPath}" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Width="100"
                                            CanUserSort="True"
                                            SortMemberPath="IsRejected"
                                            Header="Exclude">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox local:MpAvPointerCommandExtension.IsEnabled="{Binding IsSelected}"
                                          local:MpAvPointerCommandExtension.LeftPressCommand="{Binding ToggleIsRejectedCommand}"
                                          IsChecked="{Binding IsRejected, Mode=OneWay}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!--  PASTE GESTURE VIEW  -->
                    <DataGridTemplateColumn Width="130">
                        <DataGridTemplateColumn.HeaderTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal"
                                            Spacing="5">
                                    <TextBlock Text="Paste Shortcut" />
                                    <local:MpAvToolTipInfoHintView ToolTipText="#p#Monkey Paste uses keyboard automation to perform external pasting and some applications (like a console or shell for example) may have a non-default paste shortcut. To ensure proper interoperability record that short cut for the esoteric application here.#p##p#Along with pasting into the application, this shortcut will be needed to track usage statistics (only for delights, not shared)" />
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.HeaderTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Classes="noBg noHoverBg"
                                        HorizontalAlignment="Stretch"
                                        VerticalAlignment="Stretch"
                                        local:MpAvPointerCommandExtension.IsEnabled="{Binding IsSelected}"
                                        local:MpAvPointerCommandExtension.LeftPressCommand="{Binding AssignPasteShortcutCommand}">

                                    <local:MpAvShortcutView Background="Transparent"
                                                            DataContext="{Binding PasteShortcutViewModel}"
                                                            Margin="5"
                                                            HorizontalAlignment="Stretch"
                                                            VerticalAlignment="Stretch"
                                                            EmptyText="Default" />
                                </Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

        </DockPanel>

        <!--  WEBSITES  -->

        <Label Classes="h1"
               Content="Websites" />
        <Border Classes="labelUnderline" />
        <DockPanel Classes="dataPanel"
                   VerticalAlignment="Top"
                   x:DataType="local:MpAvUrlCollectionViewModel"
                   DataContext="{x:Static local:MpAvUrlCollectionViewModel.Instance}">
            <Button DockPanel.Dock="Bottom"
                    HorizontalAlignment="Right"
                    Classes="defaultButton iconTextButton sourceAddButton"
                    Command="{Binding AddUrlCommand}">
                <DockPanel>
                    <Image DockPanel.Dock="Left"
                           Source="{Binding Source={StaticResource AddImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                    <Label Content="Add Url" />
                </DockPanel>
            </Button>
            <DataGrid Grid.Row="1"
                      x:Name="ExcludedUrlDatagrid"
                      Items="{Binding FilteredItems}"
                      SelectedItem="{Binding SelectedItem, Mode=TwoWay}">
                <DataGrid.Columns>
                    <DataGridTemplateColumn Width="30">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Image Width="15"
                                       Height="15"
                                       Source="{Binding IconId, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Url"
                                            CanUserSort="True"
                                            CanUserResize="True"
                                            SortMemberPath="UrlPath"
                                            Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid Classes="marqueeContainer">
                                    <local:MpAvMarqueeTextBox EditOnFocus="False"
                                                              DropShadowBrush="Transparent"
                                                              ReadOnlyForeground="Black"
                                                              NavigateUri="{Binding UrlPath}"
                                                              Text="{Binding UrlPath}" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Header="Domain"
                                            CanUserResize="True"
                                            CanUserSort="True"
                                            SortMemberPath="UrlDomainPath"
                                            Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Grid Classes="marqueeContainer">
                                    <local:MpAvMarqueeTextBox EditOnFocus="False"
                                                              DropShadowBrush="Transparent"
                                                              ReadOnlyForeground="Black"
                                                              Text="{Binding UrlDomainPath}" />
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Width="120"
                                            SortMemberPath="IsSubRejected">

                        <DataGridTemplateColumn.HeaderTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal"
                                            Spacing="5">
                                    <TextBlock Text="Exclude Url?" />
                                    <local:MpAvToolTipInfoHintView ToolTipText="#warning# Source url recognition is dependant on the host applications clipboard support so rejection is not guaranteed :(" />
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.HeaderTemplate>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox local:MpAvPointerCommandExtension.IsEnabled="True"
                                          local:MpAvPointerCommandExtension.LeftPressCommand="{Binding ToggleIsRejectedCommand}"
                                          IsChecked="{Binding IsSubRejected, Mode=OneWay}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTemplateColumn Width="120"
                                            SortMemberPath="IsRejected"
                                            Header="Exclude Domain?">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox local:MpAvPointerCommandExtension.IsEnabled="True"
                                          local:MpAvPointerCommandExtension.LeftPressCommand="{Binding ToggleIsRejectedCommand}"
                                          IsChecked="{Binding IsRejected, Mode=OneWay}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>

        </DockPanel>
    </StackPanel>
</local:MpAvUserControl>
