<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:dd="clr-namespace:MonkeyPaste.Avalonia;assembly=MonkeyPaste.Avalonia"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:sys="clr-namespace:System;assembly=mscorlib"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       mc:Ignorable="d"
                       d:DesignWidth="800"
                       d:DesignHeight="450"
                       x:TypeArguments="local:MpAvSettingsViewModel"
                       x:DataType="local:MpAvSettingsViewModel"
                       x:CompileBindings="True"
                       DataContext="{x:Static local:MpAvSettingsViewModel.Instance}"
                       x:Class="MonkeyPaste.Avalonia.MpAvSettingsView">
    <local:MpAvUserControl.Resources>
        <SolidColorBrush x:Key="DataGridCellFocusVisualPrimaryBrush">Transparent</SolidColorBrush>
        <SolidColorBrush x:Key="DataGridCellFocusVisualSecondaryBrush">Transparent</SolidColorBrush>

    </local:MpAvUserControl.Resources>

    <local:MpAvUserControl.Styles>
        <StyleInclude Source="avares://MonkeyPaste.Avalonia/Themes/Default/Controls/MpAvSettings.axaml" />
    </local:MpAvUserControl.Styles>
    <DockPanel x:Name="OuterContainer"
               Classes.dark="{Binding IsThemeDark, Source={x:Static local:MpAvThemeViewModel.Instance}}"
               LastChildFill="True">
        <StackPanel x:Name="TabAndFilterPanel"
                    IsVisible="{Binding !IsLoginOnly}"
                    DockPanel.Dock="Top"
                    Orientation="Vertical">

            <!--  TABS PANEL  -->
            <local:MpAvSettingsMenuView x:Name="TabMenu"
                                        MaxHeight="200"
                                        BorderThickness="0,0,0,1.5"
                                        BorderBrush="Silver" />

            <!--  FILTER TEXTBOX  -->
            <Border Height="50"
                    HorizontalAlignment="Stretch"
                    BorderThickness="0,0,0,1.5"
                    BorderBrush="Silver">
                <local:MpAvClipBorder Grid.Row="1"
                                      Grid.ColumnSpan="6"
                                      Margin="10,0"
                                      Padding="0"
                                      CornerRadius="10"
                                      BorderBrush="{DynamicResource ThemeGrayAccent2Color}"
                                      BorderThickness="1"
                                      Background="{DynamicResource ThemeInteractiveBgColor}"
                                      HorizontalAlignment="Right"
                                      VerticalAlignment="Center"
                                      VerticalContentAlignment="Center">
                    <Grid>

                        <!--
                            FILTER TEXTBOX
                        -->

                        <AutoCompleteBox x:Name="FilterBox"
                                         MinWidth="150"
                                         MinHeight="30"
                                         Classes="common"
                                         VerticalAlignment="Stretch"
                                         BorderThickness="0"
                                         Margin="0"
                                         Padding="10,0,0,0"
                                         ItemsSource="{Binding RecentSettingsSearches}"
                                         local:MpAvDelayedTextChangedExtension.IsEnabled="True"
                                         local:MpAvDelayedTextChangedExtension.DelayMs="500"
                                         local:MpAvDelayedTextChangedExtension.Text="{Binding FilterText, Source={x:Static local:MpAvSettingsViewModel.Instance}, Mode=TwoWay}"
                                         Watermark="{Binding Source={x:Static local:R.U}, Path=CurrentUiStrings.SettingsSearchWatermark}" />

                        <!--<TextBox x:Name="FilterBox"
                                 MinWidth="150"
                                 MinHeight="30"
                                 Classes="common"
                                 VerticalAlignment="Stretch"
                                 VerticalContentAlignment="Center"
                                 BorderThickness="0"
                                 Margin="0"
                                 Padding="10,0,0,0"
                                 local:MpAvDelayedTextChangedExtension.IsEnabled="True"
                                 local:MpAvDelayedTextChangedExtension.DelayMs="500"
                                 local:MpAvDelayedTextChangedExtension.Text="{Binding FilterText, Source={x:Static local:MpAvSettingsViewModel.Instance}, Mode=TwoWay}"
                                 Watermark="{Binding Source={x:Static local:R.U}, Path=CurrentUiStrings.SettingsSearchWatermark}" />-->


                        <!--  CLEAR FILTER BUTTON  -->

                        <local:MpAvClearTextButton x:Name="ClearSearchTextButton"
                                                   Classes="TextBoxButton square"
                                                   Height="20"
                                                   Margin="5"
                                                   IsVisible="{Binding FilterText, Converter={x:Static local:MpAvIsNotNullZeroOrEmptyToBoolConverter.Instance}}"
                                                   ClearCommand="{Binding ClearFilterTextCommand}"
                                                   HorizontalAlignment="Right"
                                                   VerticalAlignment="Center" />
                    </Grid>
                </local:MpAvClipBorder>
            </Border>

        </StackPanel>

        <!--  Footer  -->
        <Border x:Name="FooterContainer"
                IsVisible="{Binding !IsLoginOnly}"
                DockPanel.Dock="Bottom"
                HorizontalAlignment="Stretch"
                BorderThickness="0,1.5,0,0"
                BorderBrush="Silver"
                MinHeight="48">
            <DockPanel>
                <Button x:Name="ResetButton"
                        IsVisible="{Binding IsPrefTabSelected}"
                        Classes="defaultButton textOnlyButton footer"
                        Margin="10"
                        DockPanel.Dock="Left"
                        Content="{Binding Source={x:Static local:R.U}, Path=CurrentUiStrings.PrefRestoreDefaultsLabel}"
                        Command="{Binding RestoreDefaultsCommand}" />
            </DockPanel>
        </Border>
        <!--  Content  -->
        <ScrollViewer x:Name="BodyScrollViewer"
                      IsScrollInertiaEnabled="False"
                      BringIntoViewOnFocusChange="False">
            <ScrollViewer.Transitions>
                <Transitions>
                    <VectorTransition Property="Offset"
                                      Duration="0:0:0.5" />
                </Transitions>

            </ScrollViewer.Transitions>
            <TransitioningContentControl x:Name="SettingsTransitioningContentControl"
                                         Margin="10,5,20,5"
                                         Content="{Binding SelectedTabIdx}">
                <TransitioningContentControl.PageTransition>
                    <CrossFade Duration="0:00:00.500" />
                </TransitioningContentControl.PageTransition>
                <TransitioningContentControl.DataTemplates>

                    <local:MpAvSettingsTabDataTemplateSelector>
                        <DataTemplate x:Key="AccountTemplate">
                            <!--<local:MpAvAccountView />-->
                            <local:MpAvSyncView />
                        </DataTemplate>
                        <DataTemplate x:Key="PreferencesTemplate"
                                      x:DataType="local:MpAvSettingsViewModel">
                            <local:MpAvSettingsFrameCollectionView DataContext="{Binding FilteredPreferenceFrames, Source={x:Static local:MpAvSettingsViewModel.Instance}}" />
                        </DataTemplate>
                        <DataTemplate x:Key="InteropTemplate">
                            <local:MpAvInteropView />
                        </DataTemplate>
                        <DataTemplate x:Key="ShortcutsTemplate">
                            <local:MpAvShortcutsView />
                        </DataTemplate>
                    </local:MpAvSettingsTabDataTemplateSelector>
                </TransitioningContentControl.DataTemplates>
            </TransitioningContentControl>
        </ScrollViewer>

    </DockPanel>
</local:MpAvUserControl>
