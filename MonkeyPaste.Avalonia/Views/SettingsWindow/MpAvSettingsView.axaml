<local:MpAvUserControl xmlns="https://github.com/avaloniaui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:dd="clr-namespace:MonkeyPaste.Avalonia;assembly=MonkeyPaste.Avalonia"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:sys="clr-namespace:System;assembly=mscorlib"
                       xmlns:local="using:MonkeyPaste.Avalonia"
                       xmlns:pcl="using:MonkeyPaste"
                       mc:Ignorable="d"
                       d:DesignWidth="800"
                       d:DesignHeight="450"
                       x:TypeArguments="local:MpAvSettingsViewModel"
                       x:DataType="local:MpAvSettingsViewModel"
                       x:CompileBindings="True"
                       DataContext="{x:Static local:MpAvSettingsViewModel.Instance}"
                       x:Class="MonkeyPaste.Avalonia.MpAvSettingsView">
    <local:MpAvUserControl.Resources>
        <HorizontalAlignment x:Key="ExpanderHeaderHorizontalContentAlignment">Stretch</HorizontalAlignment>
        <SolidColorBrush x:Key="DataGridCellFocusVisualPrimaryBrush">Transparent</SolidColorBrush>
        <SolidColorBrush x:Key="DataGridCellFocusVisualSecondaryBrush">Transparent</SolidColorBrush>
    </local:MpAvUserControl.Resources>

    <local:MpAvUserControl.Styles>
        <!--  TABS  -->
        <Style Selector="RadioButton.tab">
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalAlignment"
                    Value="Stretch" />
            <Setter Property="CornerRadius"
                    Value="0" />
            <Setter Property="Margin"
                    Value="0" />
            <Setter Property="BorderThickness"
                    Value="2.5,5" />
            <Setter Property="BorderBrush"
                    Value="{DynamicResource ThemeGrayAccent1}" />
        </Style>
        <Style Selector="RadioButton.tab:unchecked /template/ ContentPresenter">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeAccent5Color}" />
        </Style>
        <Style Selector="RadioButton.tab:unchecked:pointerover /template/ ContentPresenter">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeAccent1Color}" />
        </Style>

        <!--<Style Selector="RadioButton.tab:unchecked:pointerover /template/ ContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%"
                                         EndPoint="0%,100%">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Color="{DynamicResource ThemeGrayAccent3}"
                                          Offset="0" />
                            <GradientStop Color="{DynamicResource ThemeAccent1Color}"
                                          Offset="0.7" />
                            <GradientStop Color="{DynamicResource ThemeGrayAccent3}"
                                          Offset="1" />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
            <Setter Property="Foreground"
                    Value="{DynamicResource ThemeInteractiveColor}" />
        </Style>
        <Style Selector="RadioButton.tab:unchecked /template/ ContentPresenter">
            <Setter Property="Background">
                <Setter.Value>
                    <LinearGradientBrush StartPoint="0%,0%"
                                         EndPoint="0%,100%">
                        <LinearGradientBrush.GradientStops>
                            <GradientStop Color="{DynamicResource ThemeGrayAccent3}"
                                          Offset="0" />
                            <GradientStop Color="{DynamicResource ThemeAccent5Color}"
                                          Offset="0.7" />
                            <GradientStop Color="{DynamicResource ThemeGrayAccent3}"
                                          Offset="1" />
                        </LinearGradientBrush.GradientStops>
                    </LinearGradientBrush>
                </Setter.Value>
            </Setter>
        </Style>-->
        <Style Selector="RadioButton.tab Image">
            <Setter Property="MinWidth"
                    Value="30" />
            <Setter Property="MinHeight"
                    Value="30" />
            <Setter Property="MaxWidth"
                    Value="60" />
            <Setter Property="MaxHeight"
                    Value="60" />
            <Setter Property="Stretch"
                    Value="Uniform" />
            <Setter Property="Margin"
                    Value="0,10,0,0" />
        </Style>
        <Style Selector="RadioButton.tab Label">
            <Setter Property="DockPanel.Dock"
                    Value="Bottom" />
            <Setter Property="HorizontalAlignment"
                    Value="Center" />
            <Setter Property="FontWeight"
                    Value="Medium" />
            <Setter Property="Margin"
                    Value="5" />
            <Setter Property="FontSize"
                    Value="16" />
        </Style>
        <Style Selector="Button.footer">
            <Setter Property="HorizontalContentAlignment"
                    Value="Center" />
            <Setter Property="Padding"
                    Value="5,3" />
            <Setter Property="Width"
                    Value="100" />
            <Setter Property="Margin"
                    Value="10,0" />
        </Style>

        <!--  FRAMES  -->
        <Style Selector="local|MpAvSettingsFrameView">
            <Setter Property="Margin"
                    Value="10" />
            <Setter Property="Width"
                    Value="300" />
            <Setter Property="MinHeight"
                    Value="50" />
        </Style>

        <!--  HEADERS  -->

        <Style Selector="Label.h1">
            <Setter Property="Margin"
                    Value="0,10,0,0" />
        </Style>

        <!--  HEADER TEXT  -->

        <!--  HEADER ICON  -->
        <Style Selector=":is(Control).header">
            <Setter Property="Margin"
                    Value="0,0,10,0" />
        </Style>
        <Style Selector="TextBlock.frame.header.text">
            <Setter Property="Foreground"
                    Value="{DynamicResource ThemeWhite}" />
            <Setter Property="FontSize"
                    Value="18" />
        </Style>

        <Style Selector="Image.expander.header.icon">
            <Setter Property="Width"
                    Value="30" />
            <Setter Property="Height"
                    Value="30" />
        </Style>

        <Style Selector="Image.frame.header.icon">
            <Setter Property="Width"
                    Value="20" />
            <Setter Property="Height"
                    Value="20" />
        </Style>

        <!--  EMPTY GRID TEXTBLOCKS  -->
        <Style Selector="TextBlock.emptyTextBlock">
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalAlignment"
                    Value="Center" />
            <Setter Property="FontStyle"
                    Value="Italic" />
            <Setter Property="TextAlignment"
                    Value="Center" />
            <!--<Setter Property="Foreground"
                    Value="{DynamicResource ThemeInteractiveColor}" />-->
            <Setter Property="FontSize"
                    Value="16" />
        </Style>

        <!--  EXPANDERS  -->
        <Style Selector="Expander">
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Stretch" />
            <Setter Property="ExpandDirection"
                    Value="Down" />
            <Setter Property="CornerRadius"
                    Value="10" />
            <Setter Property="Margin"
                    Value="10,0,20,0" />
        </Style>


        <Style Selector="Expander Border.labelUnderline_long, Expander Border.labelUnderline">
            <Setter Property="IsVisible"
                    Value="False" />
        </Style>

        <Style Selector="Expander /template/ ToggleButton#ExpanderHeader">
            <Setter Property="HorizontalContentAlignment"
                    Value="Left" />
            <Setter Property="VerticalContentAlignment"
                    Value="Center" />
            <Setter Property="FontSize"
                    Value="20" />
        </Style>

        <!--  DATAGRIDS  -->
        <Style Selector=":is(Border).filterDataGridContainer">
            <Setter Property="CornerRadius"
                    Value="10" />
            <Setter Property="BorderBrush"
                    Value="{DynamicResource ThemeInteractiveColor}" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="Background"
                    Value="{DynamicResource ThemeAccent5Color}" />
            <Setter Property="Padding"
                    Value="15" />
        </Style>
        <Style Selector="DataGrid">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeCompliment4Color}" />
            <Setter Property="GridLinesVisibility"
                    Value="All" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                    Value="Disabled" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                    Value="Hidden" />
            <Setter Property="VerticalScrollBarVisibility"
                    Value="Hidden" />
            <Setter Property="HorizontalScrollBarVisibility"
                    Value="Hidden" />
            <Setter Property="RowHeight"
                    Value="40" />
            <Setter Property="SelectionMode"
                    Value="Single" />
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalAlignment"
                    Value="Stretch" />
            <Setter Property="AutoGenerateColumns"
                    Value="False" />
        </Style>

        <!--  DATAGRID ROW BG  -->
        <Style Selector="DataGridRow:nth-child(odd)">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeCompliment3Color}" />
        </Style>
        <Style Selector="DataGridRow:nth-child(even)">
            <Setter Property="Background"
                    Value="{DynamicResource ThemeCompliment3DarkColor}" />
        </Style>
        <!--  DATAGRID MARQUEE TEXTBOX  -->
        <Style Selector="DataGrid Grid.marqueeContainer">
            <Setter Property="ClipToBounds"
                    Value="True" />
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalAlignment"
                    Value="Stretch" />
        </Style>

        <Style Selector="DataGrid Grid.marqueeContainer local|MpAvMarqueeTextBox">
            <!--<Setter Property="ReadOnlyForeground"
                    Value="Orange" />-->
        </Style>
        <Style Selector="DataGrid :is(TextBox)">
            <Setter Property="MinHeight"
                    Value="20" />
            <Setter Property="Margin"
                    Value="5,0,0,0" />
            <Setter Property="FontSize"
                    Value="14" />
            <Setter Property="IsReadOnly"
                    Value="True" />
            <Setter Property="VerticalAlignment"
                    Value="Center" />
            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Left" />
            <Setter Property="VerticalContentAlignment"
                    Value="Center" />
        </Style>

        <!--  DATAGRID CHECKBOXES  -->
        <Style Selector="DataGrid CheckBox">
            <Setter Property="VerticalAlignment"
                    Value="Center" />
            <Setter Property="HorizontalAlignment"
                    Value="Center" />
            <Setter Property="VerticalContentAlignment"
                    Value="Stretch" />
        </Style>

        <!--  DATAGRID COMBOBOXES  -->

        <Style Selector="DataGrid ComboBox">
            <Setter Property="VerticalAlignment"
                    Value="Center" />
        </Style>
        <Style Selector="DataGrid ComboBox ComboBoxItem">

            <Setter Property="HorizontalAlignment"
                    Value="Stretch" />
            <Setter Property="HorizontalContentAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalAlignment"
                    Value="Stretch" />
            <Setter Property="VerticalContentAlignment"
                    Value="Stretch" />
        </Style>


        <!--  DATA GRID ADD BUTTON  -->
        <Style Selector=":is(Button).dataGridAddButton">
            <Setter Property="HorizontalAlignment"
                    Value="Right" />
            <Setter Property="Width"
                    Value="150" />
            <Setter Property="Margin"
                    Value="0,10" />
        </Style>
        <Style Selector=":is(Button).dataGridAddButton DockPanel Image">
            <Setter Property="Margin"
                    Value="2" />
        </Style>
    </local:MpAvUserControl.Styles>
    <DockPanel LastChildFill="True"
               Background="{DynamicResource SettingsWindowBgBrush}">

        <!--  TABS PANEL  -->

        <Grid x:Name="HeaderContainer"
              DockPanel.Dock="Top"
              MaxHeight="250"
              ColumnDefinitions="*,*,*,*,*"
              RowDefinitions="Auto,30">
            <!--  Account Tab Button  -->
            <RadioButton Grid.Column="0"
                         Opacity="{Binding IsTabButtonVisible0, ConverterParameter=1|0, Converter={x:Static local:MpAvBoolToDoubleConverter.Instance}}"
                         Theme="{StaticResource SwitchlessRadioButton}"
                         Classes="tab outline outlineOver fade"
                         IsChecked="{Binding IsTabSelected[0], Mode=OneWay}"
                         Command="{Binding SelectTabCommand}"
                         CommandParameter="0">
                <DockPanel>
                    <Label Content="Account" />
                    <Image Source="{Binding Source={StaticResource UserImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                </DockPanel>
            </RadioButton>
            <!--  Prefs Tab Button  -->
            <RadioButton Grid.Column="1"
                         Opacity="{Binding IsTabButtonVisible1, ConverterParameter=1|0, Converter={x:Static local:MpAvBoolToDoubleConverter.Instance}}"
                         Theme="{StaticResource SwitchlessRadioButton}"
                         Classes="tab outline outlineOver fade"
                         IsChecked="{Binding IsTabSelected[1], Mode=OneWay}"
                         Command="{Binding SelectTabCommand}"
                         CommandParameter="1">
                <DockPanel>
                    <Label Content="Preferences" />
                    <Image Source="{Binding Source={StaticResource SlidersImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                </DockPanel>
            </RadioButton>
            <!--  Security Tab Button  -->
            <RadioButton Grid.Column="2"
                         Opacity="{Binding IsTabButtonVisible2, ConverterParameter=1|0, Converter={x:Static local:MpAvBoolToDoubleConverter.Instance}}"
                         Theme="{StaticResource SwitchlessRadioButton}"
                         Classes="tab outline outlineOver fade"
                         IsChecked="{Binding IsTabSelected[2], Mode=OneWay}"
                         Command="{Binding SelectTabCommand}"
                         CommandParameter="2">
                <DockPanel>
                    <Label Content="Security" />
                    <Image Source="{Binding Source={StaticResource ShieldImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                </DockPanel>
            </RadioButton>
            <!--  Shortcuts tab button  -->
            <RadioButton Grid.Column="3"
                         Opacity="{Binding IsTabButtonVisible3, ConverterParameter=1|0, Converter={x:Static local:MpAvBoolToDoubleConverter.Instance}}"
                         Theme="{StaticResource SwitchlessRadioButton}"
                         Classes="tab outline outlineOver fade"
                         IsChecked="{Binding IsTabSelected[3], Mode=OneWay}"
                         Command="{Binding SelectTabCommand}"
                         CommandParameter="3">
                <DockPanel>
                    <Label Content="Shortcuts" />
                    <Image Source="{Binding Source={StaticResource HotkeyImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                </DockPanel>
            </RadioButton>
            <!--  Help tab Button  -->
            <RadioButton Grid.Column="4"
                         Opacity="{Binding IsTabButtonVisible4, ConverterParameter=1|0, Converter={x:Static local:MpAvBoolToDoubleConverter.Instance}}"
                         Theme="{StaticResource SwitchlessRadioButton}"
                         Classes="tab outline outlineOver fade"
                         IsChecked="{Binding IsTabSelected[5], Mode=OneWay}"
                         Command="{Binding SelectTabCommand}"
                         CommandParameter="5">
                <DockPanel>
                    <Label Content="Help" />
                    <Image Source="{Binding Source={StaticResource QuestionMarkImage}, Converter={x:Static local:MpAvIconSourceObjToBitmapConverter.Instance}}" />
                </DockPanel>
            </RadioButton>

            <!--  FILTER TEXTBOX  -->
            <Border Grid.Row="1"
                    Grid.ColumnSpan="6"
                    MinHeight="50"
                    Margin="0,5"
                    Padding="10">
                <TextBox Grid.Row="1"
                         HorizontalAlignment="Right"
                         VerticalContentAlignment="Center"
                         MinWidth="150"
                         CornerRadius="10"
                         BorderBrush="{DynamicResource ThemeGrayAccent2}"
                         BorderThickness="1"
                         Margin="0"
                         Padding="10,0,0,0"
                         local:MpAvDelayedTextChangedExtension.IsEnabled="True"
                         local:MpAvDelayedTextChangedExtension.DelayMs="500"
                         local:MpAvDelayedTextChangedExtension.Text="{Binding FilterText, Source={x:Static local:MpAvSettingsViewModel.Instance}, Mode=TwoWay}"
                         Watermark="Filter..." />
            </Border>
        </Grid>

        <!--  Footer  -->
        <DockPanel DockPanel.Dock="Bottom"
                   HorizontalAlignment="Stretch"
                   Background="{DynamicResource ThemeCompliment2Color}">
            <Button x:Name="ResetButton"
                    Classes="defaultButton textOnlyButton footer"
                    Margin="10"
                    DockPanel.Dock="Left"
                    Content="Reset All"
                    Command="{Binding ResetSettingsCommand}" />
        </DockPanel>

        <!--  Content  -->
        <ScrollViewer>
            <TransitioningContentControl x:Name="SettingsTransitioningContentControl"
                                         Margin="10,5"
                                         Content="{Binding}">
                <TransitioningContentControl.PageTransition>
                    <CrossFade Duration="0:00:00.500" />
                </TransitioningContentControl.PageTransition>
                <TransitioningContentControl.DataTemplates>

                </TransitioningContentControl.DataTemplates>
                <ContentControl Content="{Binding SelectedTabIdx}"
                                x:CompileBindings="False">
                    <ContentControl.DataTemplates>
                        <local:MpAvSettingsTabDataTemplateSelector>
                            <DataTemplate x:Key="AccountTemplate">
                                <local:MpAvSettingsFrameCollectionView DataContext="{Binding FilteredAccountFrames, Source={x:Static local:MpAvSettingsViewModel.Instance}}" />
                            </DataTemplate>
                            <DataTemplate x:Key="PreferencesTemplate">
                                <local:MpAvSettingsFrameCollectionView DataContext="{Binding FilteredPreferenceFrames, Source={x:Static local:MpAvSettingsViewModel.Instance}}" />
                            </DataTemplate>
                            <DataTemplate x:Key="SecurityTemplate">
                                <local:MpAvSecurityView />
                            </DataTemplate>
                            <DataTemplate x:Key="ShortcutsTemplate">
                                <local:MpAvShortcutsView />
                            </DataTemplate>
                            <DataTemplate x:Key="HelpTemplate">
                                <local:MpAvHelpView />
                            </DataTemplate>
                        </local:MpAvSettingsTabDataTemplateSelector>
                    </ContentControl.DataTemplates>
                </ContentControl>
            </TransitioningContentControl>
        </ScrollViewer>
    </DockPanel>
</local:MpAvUserControl>
