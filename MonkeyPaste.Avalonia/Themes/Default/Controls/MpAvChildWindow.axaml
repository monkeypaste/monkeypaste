<Styles xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:local="using:MonkeyPaste.Avalonia">
    <Design.PreviewWith>
        <local:MpAvChildWindow Title="Sup"
                               Width="360"
                               Height="740" />
    </Design.PreviewWith>
    <Style Selector=":is(local|MpAvChildWindow)">
        <Setter Property="HorizontalAlignment"
                Value="Left" />
        <Setter Property="VerticalAlignment"
                Value="Top" />
        <Setter Property="RenderTransformOrigin"
                Value="0,0" />
        <Setter Property="RenderTransform">
            <Setter.Value>
                <TranslateTransform />
            </Setter.Value>
        </Setter>
        <Setter Property="Template">
            <ControlTemplate>
                <Grid x:DataType="local:MpAvChildWindow"
                      RowDefinitions="Auto,*">
                    <!--  HEADER  -->
                    <Border x:Name="PART_NavContainer"
                            IsVisible="{TemplateBinding ShowHeader}"
                            Grid.Row="0"
                            Padding="5"
                            Background="{DynamicResource ThemeDarkColor}">
                        <Grid>
                            <!--  BACK BUTTON  -->
                            <Button x:Name="PART_PageNavBackButton"
                                    HorizontalAlignment="Left"
                                    Classes="noBg noHoverBg noBorder"
                                    IsVisible="{TemplateBinding BackCommand,
                                                                Converter={x:Static local:MpAvIsNotNullZeroOrEmptyToBoolConverter.Instance}}"
                                    Command="{TemplateBinding BackCommand}"
                                    CommandParameter="{TemplateBinding BackCommandParameter}">
                                <Image Source="{Binding Source={StaticResource LeftImage}, Converter={x:Static local:MpAvStringHexToBitmapTintConverter.Instance}, ConverterParameter=ThemeInteractiveColor_norand}" />
                            </Button>

                            <!--  HEADER MENU  -->
                            <ItemsControl x:Name="PART_PageNavMenu"
                                          Padding="5"
                                          IsVisible="{TemplateBinding MenuItems,
                                                                      Converter={x:Static local:MpAvIsNotNullZeroOrEmptyToBoolConverter.Instance}}"
                                          ItemsSource="{TemplateBinding MenuItems}"
                                          HorizontalAlignment="Right"
                                          VerticalAlignment="Center">
                                <ItemsControl.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Horizontal" />
                                    </ItemsPanelTemplate>
                                </ItemsControl.ItemsPanel>
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate x:DataType="local:MpAvMenuItemViewModel">
                                        <Button x:Name="HeaderMenuButton"
                                                Classes="noBg noHoverBg noBorder"
                                                Command="{Binding Command}"
                                                CommandParameter="{Binding CommandParameter}">
                                            <Image Source="{Binding IconSourceObj, Converter={x:Static local:MpAvStringHexToBitmapTintConverter.Instance}, ConverterParameter=ThemeInteractiveColor_norand}" />
                                        </Button>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <TextBlock x:Name="TitleTextBlock"
                                       HorizontalAlignment="Center"
                                       Text="{TemplateBinding Title}"
                                       Effect="{StaticResource ThemeBgDropShadow}"
                                       Foreground="{Binding Background, ElementName=PART_NavContainer, Converter={x:Static local:MpAvColorToContrastColorConverter.Instance}}"
                                       FontSize="26"
                                       FontWeight="Bold"
                                       VerticalAlignment="Center"
                                       TextAlignment="Center" />
                        </Grid>

                    </Border>

                    <!--  CONTENT  -->
                    <ContentPresenter Grid.Row="1"
                                      Background="{TemplateBinding Background}"
                                      Content="{TemplateBinding Content}" />
                </Grid>
            </ControlTemplate>
        </Setter>
    </Style>
</Styles>
